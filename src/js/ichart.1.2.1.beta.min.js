!function(t){var e=navigator.userAgent.toLowerCase(),i=function(t){return t.test(e)},n=Object.prototype.toString,o=i(/opera/),s=i(/\bchrome\b/),a=i(/webkit/),r=!s&&i(/safari/),l=!o&&i(/msie/),c=!!document.createElement("canvas").getContext,u=!a&&i(/gecko/),g=i(/ipod|ipad|iphone|android/gi),h={Linear:function(t,e,i,n){return i*t/n+e},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}}},d=function(t){var e=!1,i=!1,d=[],p=function(){return document.addEventListener?function(){document.removeEventListener("DOMContentLoaded",p,!1),y()}:document.attachEvent?function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",p),y())}:void 0}(),f=function(){if(!e){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(f,1)}y()}},y=function(){if(!e){e=!0;for(var t=0;t<d.length;t++)d[t].call(document);d=[]}},x=function(){if(!i){if(i=!0,"complete"===document.readyState)return setTimeout(y,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",p,!1),t.addEventListener("load",y,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",p),t.attachEvent("onload",y);var e=!1;try{e=null==t.frameElement}catch(n){}document.documentElement.doScroll&&e&&f()}}},_=function(t){x(),e?t.call(document,v):d.push(function(){return t.call(this)})},v=function(t){return!t||t.nodeType?t:"string"==typeof t?(-1!=t.indexOf("#")&&(t=t.substring(1)),document.getElementById(t)):void("function"==typeof t&&_(t))};v.apply=function(t,e){if(t&&e&&"object"==typeof e)for(var i in e)"undefined"!=typeof e[i]&&(t[i]=e[i]);if(!e&&t){var n={};for(var i in t)n[i]=t[i];return n}return t},v.apply(v,{version:"1.2.1",isEmpty:function(t,e){return null===t||void 0===t||v.isArray(t)&&!t.length||!e&&""===t},isArray:function(t){return"[object Array]"===n.apply(t)},isObject:function(t){return!!t&&"[object Object]"===n.apply(t)},isFunction:function(t){return"[object Function]"===n.apply(t)},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isString:function(t){return"string"==typeof t},isFalse:function(t){return"boolean"==typeof t&&!t},isDefined:function(t){return"undefined"!=typeof t},each:function(t,e,i,n){for(var o=t.length,s=0;o>s;s++)if(n&&v.isArray(t[s]))v.each(t[s],e,i,n);else if(v.isFalse(e.call(i||t,t[s],s)))break},eachAll:function(t,e,i){v.each(t,e,i,!0)},sor:function(t,e){for(var i,n=t.length-1,o=0;n>o;o++)for(var s=n;s>o;s--)(e?!e(t[s],t[s-1]):t[s]<t[s-1])&&(i=t[s],t[s]=t[s-1],t[s-1]=i)}}),v.applyIf=function(t,e){if(t&&v.isObject(e))for(var i in e)v.isDefined(e[i])&&!v.isDefined(t[i])&&(t[i]=e[i]);return!e&&t?v.apply(t):t},v.merge=function(t,e,i,n){if(t&&v.isObject(e)){for(var o in e)v.isDefined(e[o])&&(v.isObject(e[o])?v.isObject(t[o])?v.merge(t[o],e[o]):t[o]=v.clone(e[o],!0):t[o]=e[o]);return v.merge(t,i,n)}return t},v.clone=function(t,e,i){var n={};if(v.isArray(t)&&v.isObject(e))for(var o=0;o<t.length;o++)n[t[o]]=i&&v.isObject(e[t[o]])?v.clone(e[t[o]],i):e[t[o]];else if(v.isObject(t))for(var s in t)n[s]=e&&v.isObject(t[s])&&!t[s].ICHARTJS_OBJECT?v.clone(t[s],e):t[s];return n},v.override=function(t,e){if(t&&e){var i=t.prototype;v.apply(i,e),v.isIE&&e.hasOwnProperty("toString")&&(i.toString=e.toString)}},v.extend=function(){var t=function(t){for(var e in t)this[e]=t[e]},e=Object.prototype.constructor;return function(i,n){var o,s=function(){i.apply(this,arguments)},a=function(){},r=i.prototype;return a.prototype=r,o=s.prototype=new a,o.constructor=s,s.superclass=r,r.constructor==e&&(r.constructor=i),s.override=function(t){v.override(s,t)},o.superclass=o.supr=function(){return r},o.override=t,v.override(s,n),s.extend=function(t){return v.extend(s,t)},s.plugin_={},s.plugin=function(t,e){v.isString(t)&&v.isFunction(e)&&(s.plugin_[t]=e)},s}}();var b=Math.sin,m=Math.cos,w=Math.atan,T=Math.sqrt,C=Math.abs,A=Math.PI,D=2*A,k=Math.ceil,E=Math.round,S=Math.floor,P=Math.max,z=Math.min,O=parseFloat,L={},M={},R=function(t,e){if(0==t)return t;var i=C(t),n=.1;if(i>1){for(;i>1;)i/=10,n=10*n;return S(t/n+e)*n}for(n=1;1>i;)i=10*i,n=10*n;return E(t*n+e)/n},I=function(t){return t=t.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==t.length?"rgba(":"rgb(")+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+(7==t.length?",0."+t.substring(6,7)+")":")")},H=function(t){var e=/rgb\((\w*),(\w*),(\w*)\)/.exec(t);if(e)return new Array(e[1],e[2],e[3]);if(e=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(t))return new Array(e[1],e[2],e[3],e[4]);throw new Error("invalid colors value '"+t+"'")},F=function(t,e,i){v.isArray(t)&&(e=t[1],i=t[2],t=t[0]),t/=255,e/=255,i/=255;var n=P(P(t,e),i),o=z(z(t,e),i),s=n-o;if(0==s)return new Array(0,0,n);var a;return t==n?a=(e-i)/s:e==n?a=(i-t)/s+2:i==n&&(a=(t-e)/s+4),a*=60,0>a&&(a+=360),new Array(a,s/n,n)},B=function(t){if(!t)return t;if(t=t.replace(/\s/g,"").toLowerCase(),/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(t))return t;if(/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.\d*)?|1(\.0)?)\)$/.exec(t))return t;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(t))return I(t);throw new Error("invalid colors value '"+t+"'")},X=function(t,e,i,n){v.isArray(t)&&(n=e,e=t[1],i=t[2],t=t[0]);var o,s,a,r=S(t/60)%6,l=t/60-r,c=i*(1-e),u=i*(1-e*l),g=i*(1-e*(1-l));switch(r){case 0:o=i,s=g,a=c;break;case 1:o=u,s=i,a=c;break;case 2:o=c,s=i,a=g;break;case 3:o=c,s=u,a=i;break;case 4:o=g,s=c,a=i;break;case 5:o=i,s=c,a=u}return"rgb"+(n?"a":"")+"("+E(255*o)+","+E(255*s)+","+E(255*a)+(n?","+n+")":")")},Y=.05,V=.14,j=function(t,e){return e=e||V,t>.5?e-(1-t)/10:t>.1?e-.16+t/5:t>e?e:t/2},W=function(t,e,i,n){if(!e)return e;e=H(B(e));var o=F(e);return n=0!=n?n||Y:n,o[1]-=n,t?(o[2]-=j(o[2],i),o[1]=v.upTo(o[1],1),o[2]=v.lowTo(o[2],0)):(o[2]+=j(1-o[2],i),o[1]=v.lowTo(o[1],0),o[2]=v.upTo(o[2],1)),X(o,e[3])};return v.apply(v,{getFont:function(t,e,i,n){return t+" "+e+(n||"px")+" "+i},getDoc:function(){var e=t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document;return e},_Abstract:function(t,e){if(!e[t])throw new Error("You must implements method '"+t+"' in "+e.type)},getAA:function(t){return"linear"==t?h.Linear:"easeInOut"==t||"easeIn"==t||"easeOut"==t?h.Cubic[t]:h.Linear},noConflict:function(){return v},plugin:function(t,e,i){v.isFunction(t)&&t.plugin(e,i)},parsePadding:function(t,e){return t=t||0,v.isNumber(t)?new Array(t,t,t,t):v.isArray(t)?t:(e=e||0,t=t.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(","),1==t.length?t[0]=t[1]=t[2]=t[3]=O(t[0])||e:2==t.length?(t[0]=t[2]=O(t[0])||e,t[1]=t[3]=O(t[1])||e):3==t.length?(t[0]=O(t[0])||e,t[1]=t[3]=O(t[1])||e,t[2]=O(t[2])||e):(t[0]=O(t[0])||e,t[1]=O(t[1])||e,t[2]=O(t[2])||e,t[3]=O(t[3])||e),t)},distanceP2P:function(t,e,i,n){return T((i-t)*(i-t)+(n-e)*(n-e))},atan2Radian:function(t,e,i,n){if(t==i)return n>e?A/2:3*A/2;if(e==n)return i>t?0:A;var o=v.quadrant(t,e,i,n),s=w(C((e-n)/(t-i)));return o?(3==o?D:A)+(2==o?s:-s):s},angle2Radian:function(t){return t*A/180},radian2Angle:function(t){return 180*t/A},quadrant:function(t,e,i,n){return i>t?n>e?0:3:n>e?1:2},toPI2:function(t){for(;0>t;)t+=D;return t},visible:function(t,e,i){if(t>=e)return[];var n=v.quadrantd(t),o=v.quadrantd(e);if((2==n||3==n)&&(2==o||3==o)&&A>e-t)return[];if(t=v.toPI2(t),e=v.toPI2(e),t>=e&&(e+=D),t>A)t=D;else{if(e>D)return[{s:t,e:A,f:i},{s:D,e:e,f:i}];e>A&&(e=A)}return{s:t,e:e,f:i}},quadrantd:function(t){if(0==t)return 0;if(0==t%D)return 3;for(;0>t;)t+=D;return k(2*(t%D)/A)-1},upTo:function(t,e){return e>t?t:e},lowTo:function(t,e){return t>e?t:e},between:function(t,e,i){return t>e?v.between(e,t,i):i>e?e:t>i?t:i},inRange:function(t,e,i){return e>i&&i>t},angleInRange:function(t,e,i){return i-=t,i=0>i?i+D:i,i%=D,e-t>i},angleZInRange:function(t,e,i){return t>e?i>t||e>i:e>i&&i>t},inRangeClosed:function(t,e,i){return e>=i&&i>=t},inEllipse:function(t,e,i,n){return 1>=t*t/i/i+e*e/n/n},p2Point:function(t,e,i,n){return{x:t+m(i)*n,y:e+b(i)*n}},toRgb:B,toRgba:function(t,e){var i=H(B(t));return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},vectorP2P:function(t,e,i){return i||(e=v.angle2Radian(e),t=v.angle2Radian(t)),e=b(e),{x:e*b(t),y:e*m(t)}},uid:function(){var t=function(){return S(65536*(1+Math.random())).toString(16).substring(1)};return function(e){return(e||"ijs")+"_"+t()+t()+t()}}(),register:function(t){if(v.isString(t))M[t.toLowerCase()]=t;else{var e=t.get("id");if(e&&""!=e||(e=t.push("id",v.uid(t.type))),L[e])throw new Error("Exist Reduplicate id :"+e);t.id=e,L[e]=t}},create:function(t){if(!t.type||!M[t.type])throw new Error("TypeNotFoundException["+t.type+"]");return new v[M[t.type]](t)},remove:function(t){var e=L[t];e.destroy(),delete L[t]},get:function(t){return L[t]},isPercent:function(t){return v.isString(t)&&t.match(/(.*)%/)},parsePercent:function(t,e){return v.isString(t)&&(t=t.match(/(.*)%/),t&&(t=e?S(O(t[1])*e/100):t[1]/100)),!t||0>=t||t>e?e:t},parseFloat:function(t,e){if(!v.isNumber(t)&&(t=O(t),!v.isNumber(t)))throw new Error("["+e+"]is not a valid number.");return t},ceil:function(t){return R(t,1)},floor:function(t){return R(t,-1)},_2D:"2d",_3D:"3d",light:function(t,e,i){return W(!1,t,e,i)},dark:function(t,e,i){return W(!0,t,e,i)},fixPixel:function(t){return v.isNumber(t)?t:O(t.replace("px",""))||0},toPixel:function(t){return v.isNumber(t)?t+"px":v.fixPixel(t)+"px"},emptyFn:function(){return!0},ratio:t.devicePixelRatio||1,supportCanvas:c,isOpera:o,isWebKit:a,isChrome:s,isSafari:r,isIE:l,isGecko:u,isMobile:g,touch:"ontouchend"in document,FRAME:g?30:60}),v.Assert={isTrue:function(t,e){if(t!==!0)throw new Error(e)}},v.requestAnimFrame=function(){var e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)};return function(t){e(t)}}(),v.Event={addEvent:function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},fix:function(e){"undefined"==typeof e&&(e=t.event);var i={target:e.target,pageX:e.pageX,pageY:e.pageY,offsetX:e.offsetX,offsetY:e.offsetY,stopPropagation:!1,event:e};if("undefined"==typeof e.offsetX){var n=document.documentElement||{},o=document.body,s=(n.scrollLeft||o.scrollLeft||0)-(n.clientLeft||o.clientLeft||0),a=(n.scrollTop||o.scrollTop||0)-(n.clientTop||o.clientTop||0),r=e.targetTouches;e.target||(i.target=e.srcElement||(r?r[0].target:n||o)),r&&(i.pageX=r[0].pageX,i.pageY=r[0].pageY),null==i.pageX&&null!=e.clientX&&(i.pageX=e.clientX+s,i.pageY=e.clientY+a);var l=0,c=0,u=i.target;if(u.getBoundingClientRect){var g=u.getBoundingClientRect();l=g.left+(t.pageXOffset||s),c=g.top+(t.pageYOffset||a)}else for(;u!=document.body&&u;)l+=u.offsetLeft-(u.scrollLeft||0),c+=u.offsetTop,u=u.offsetParent;i.offsetX=i.pageX-l,i.offsetY=i.pageY-c}return i.x=i.offsetX,i.y=i.offsetY,e.stopPropagation||(e.stopPropagation=function(){t.event.cancelBubble=!0}),i}},v}(t);t.iChart=d,t.$||(t.$=d)}(window),function(t){t.Element=function(e){var i=this._();i.type="element",i.ICHARTJS_OBJECT=!0,t._Abstract("configure",i),t._Abstract("afterConfiguration",i),i.options={},i.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0}),i.W="width",i.H="height",i.O="top",i.B="bottom",i.L="left",i.R="right",i.C="center",i.X="originx",i.Y="originy",i.variable={},i.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]},i.registerEvent("initialize"),i.configure.apply(i,Array.prototype.slice.call(arguments,1)),i.default_=t.clone(i.options,!0),i.set(e),i.afterConfiguration(i)},t.Element.prototype={_:function(){return this},afterConfiguration:function(e){if(t.isObject(e.get("listeners")))for(var i in e.get("listeners"))e.on(i,e.get("listeners")[i]);e.initialize(),e.fireEvent(e,"initialize",[e])},registerEvent:function(){for(var t=0;t<arguments.length;t++)this.events[arguments[t]]=[]},fireString:function(e,i,n,o){var s=this.fireEvent(e,i,n);return t.isString(s)?s:s!==!0&&t.isDefined(s)?s.toString():o},fireEvent:function(t,e,i){var n=this.events[e].length;if(1==n)return this.events[e][0].apply(t,i);for(var o=!0,s=0;n>s;s++)this.events[e][s].apply(t,i)||(o=!1);return o},on:function(e,i){return t.isString(e)&&t.isArray(this.events[e])?this.events[e].push(i):t.isArray(e)&&t.each(e,function(t){this.on(t,i)},this),this},getPlugin:function(t){return this.constructor.plugin_[t]},set:function(e){t.isObject(e)&&t.merge(this.options,e)},pushIf:function(e,i){return t.isDefined(this.get(e))&&null!=this.get(e)?this.get(e):this.push(e,i)},push:function(t,e){for(var i=t.split("."),n=i.length-1,o=this.options,s=0;n>s;s++)o[i[s]]||(o[i[s]]={}),o=o[i[s]];return o[i[n]]=e,e},get:function(t){for(var e=t.split("."),i=this.options[e[0]],n=1;n<e.length;n++){if(!i)return null;i=i[e[n]]}return i}},t.Html=t.extend(t.Element,{configure:function(e){this.type="html",this.T=e,t._Abstract("beforeshow",this),this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0}),this.transitions=""},initialize:function(){var t=this._();t.wrap=t.get("wrap"),t.dom=document.createElement("div"),t.get("shadow")&&t.css("boxShadow",t.get("shadow_offsetx")+"px "+t.get("shadow_offsety")+"px "+t.get("shadow_blur")+"px "+t.get("shadow_color")),t.get("border.enable")&&(t.css("border",t.get("border.width")+"px "+t.get("border.style")+" "+t.get("border.color")),t.css("borderRadius",t.get("border.radius")+"px")),t.css("position","absolute"),t.css("zIndex",t.get("index")),t.applyStyle(),t.wrap.appendChild(t.dom),t.style=t.dom.style,t.get("default_action")&&t.doAction(t)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(e,i){var n="transitionend";t.isWebKit?n="webkitTransitionEnd":t.isOpera&&(n="oTransitionEnd"),t.Event.addEvent(this.dom,n,e,i)},destroy:function(){this.wrap.removeChild(this.dom),this.dom=null},transition:function(e){this.transitions=""==this.transitions?e:this.transitions+","+e,t.isWebKit?this.css("WebkitTransition",this.transitions):t.isGecko?this.css("MozTransition",this.transitions):t.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(t,e,i){i.follow(t,e,i)},show:function(t,e){this.beforeshow(t,e,this),this.css("visibility","visible"),this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(e,i){if(t.isString(e)){if(!t.isDefined(i))return this.dom.style[e];this.dom.style[e]=i}},applyStyle:function(){for(var t,e=this.get("style").split(";"),i=0;i<e.length;i++)t=e[i].split(":"),t.length>1&&this.css(t[0],t[1])}}),t.Painter=t.extend(t.Element,{configure:function(){this.type="painter",this.dimension=t._2D,t._Abstract("commonDraw",this),t._Abstract("initialize",this),this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null}),this.variable.event={mouseover:!1},this.variable.animation={},this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==t._3D},tf:function(e){var i=this._();return t.isFunction(i.get(e))?i.get(e).apply(i,[i.T,e]):i.get(e)},applyGradient:function(t,e,i,n){var o=this._();o.get("gradient")&&o.get("f_color")&&(o.push("f_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("dark_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("light_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("background_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("f_color_",o.get("f_color")))},draw:function(t,e){if(e)this.root.draw(t);else{if(!this.fireEvent(this,"beforedraw",[this,t]))return this;this.commonDraw(this,t),this.fireEvent(this,"draw",[this,t])}},inject:function(t){t&&(this.root=t,this.target=this.T=t.T)},doConfig:function(){var e=this._(),i=t.parsePadding(e.get("padding")),n=e.get("border.enable"),n=n?t.parsePadding(e.get("border.width")):[0,0,0,0],o=t.toRgb(e.get("background_color")),s=e.get("color_factor"),a=e.get("gradient")?0:null;if(e.set({border_top:n[0],border_right:n[1],border_bottom:n[2],border_left:n[3],hborder:n[1]+n[3],vborder:n[0]+n[2],padding_top:i[0]+n[0],padding_right:i[1]+n[1],padding_bottom:i[2]+n[2],padding_left:i[3]+n[3],hpadding:i[1]+i[3]+n[1]+n[3],vpadding:i[0]+i[2]+n[0]+n[2]}),e.push("f_color",o),e.push("f_color_",o),e.push("light_color",t.light(o,s,a)),e.push("dark_color",t.dark(o,.8*s,a)),e.push("light_color2",t.light(o,2*s,a)),e.is3D()&&!e.get("xAngle_")){var r=t.vectorP2P(e.get("xAngle"),e.get("yAngle"));e.push("xAngle_",r.x),e.push("yAngle_",r.y)}}}),t.Component=t.extend(t.Painter,{configure:function(e){t.Component.superclass.configure.apply(this,arguments),this.type="component",this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}}),this.atomic=!1,this.proxy=!1,this._chart=!1,this.inject(e)},initialize:function(){t._Abstract("isEventValid",this),t._Abstract("doDraw",this),this.doConfig()},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy()},doConfig:function(){t.Component.superclass.doConfig.call(this);var e=this._(),i=e.get(e.W),n=e.get("maxwidth"),o=e.get(e.X);if(i&&n&&(i=e.push(e.W,t.parsePercent(i,n)),i>n&&(i=e.push("width",n)),n>i)){var s=e.get("align")||e.C;s==e.C?o+=(n-i)/2:s==e.R&&(o+=n-i)}e.x=e.push(e.X,o+e.get("offsetx")),e.y=e.push(e.Y,e.get(e.Y)+e.get("offsety")),e.push("fontStyle",t.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"),e.get("fontunit"))),e.data=e.get("data"),e.get("tip.enable")&&(e.pushIf("tip.border.color",e.get("f_color")),t.isFunction(e.get("tip.invokeOffset"))||e.push("tip.invokeOffset",e.tipInvoke()))},isMouseOver:function(t){return this.isEventValid(t,this)},redraw:function(t){this.root.draw(t,this.root.Combination)},last:t.emptyFn,commonDraw:function(t){t.proxy||t.doDraw.call(t,t)}}),t.Legend=t.extend(t.Component,{configure:function(){t.Legend.superclass.configure.apply(this,arguments),this.type="legend",this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"}),this.atomic=!0,this.registerEvent("parse")},isEventValid:function(e,i){var n={valid:!1},o=i.get("line_height");return e.x>this.x&&e.x<i.x+i.width&&e.y>i.y&&e.y<i.y+i.height&&t.each(i.data,function(t,s){return e.x>t.x&&e.x<t.x+t.width_+i.get("signwidth")&&e.y>t.y-o/2&&e.y<t.y+o/2?(n={valid:!0,index:s,target:t},!1):void 0},i),n},drawCell:function(t,e,i,n,o,s){var a=s.get("sign_size"),r=s.getPlugin("sign");r&&r.call(s,s.T,o,{x:t+a/2,y:e},a,n)||(-1!=o.indexOf("bar")&&s.T.box(t,e-a/12,a,a/6,0,n),"round"==o?s.T.round(t+a/2,e,a/2,n):"round-bar"==o?s.T.round(t+a/2,e,a/4,n):"square-bar"==o?s.T.box(t+a/4,e-a/4,a/2,a/2,0,n):"square"==o&&s.T.box(t,e-a/2,a,a,0,n)),s.T.fillText(i,t+s.get("signwidth"),e,0,s.get("text_with_sign_color")?n:s.get("color"),"lr",s.get("line_height"))},doDraw:function(e){e.T.box(e.x,e.y,e.width,e.height,e.get("border"),e.get("f_color"),!1,e.get("shadow")),e.T.textStyle(e.L,"middle",t.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"))),t.each(e.data,function(t){e.drawCell(t.x,t.y,t.text,t.color,t.sign,e)})},doLayout:function(e,i){var n=e.get("sign_size"),o=0,s=0,a=0,r=e.get("column"),l=e.get("row"),c=e.data.length;r=r>c?c:r,e.T.textFont(e.get("fontStyle")),e.get("line_height")<n&&e.push("line_height",n+n/5),e.push("signwidth",n+e.get("sign_space")),t.each(e.data,function(t){t.width_=e.T.measureText(t.text)},e);for(var u=0;r>u;u++){a=0;for(var g=u;c>g;g+=r)a=Math.max(a,e.data[g].width_);e.columnwidth[u]=a,o+=a}for(var u=0;l>u;u++){a=0;for(var g=u*r;c>g;g++)a=Math.max(a,e.data[g].text.split("\n").length);e.columnheight[u]=a,s+=a}if(o=e.push(e.W,o+e.get("hpadding")+e.get("signwidth")*r+(r-1)*e.get("legend_space")),o>e.get("maxwidth")){var h=Math.floor(e.get("fontsize")*(e.get("maxwidth")/o));if(!(10>h&&1==r))return h>9?e.push("fontStyle",t.getFont(e.get("fontweight"),e.push("fontsize",h),e.get("font"))):r>1&&e.push("row",Math.ceil(c/e.push("column",r-1))),void e.doLayout(e,i)}var d,p,f,y;e.width=o,e.height=s=e.push(e.H,s*e.get("line_height")+e.get("vpadding")),e.y=e.get("valign")==e.O?i.get("t_originy"):e.get("valign")==e.B?i.get("b_originy")-s:i.get("centery")-s/2,e.x=e.get("align")==e.L?i.get("l_originx"):e.get("align")==e.C?i.get("centerx")-o/2:i.get("r_originx")-o,e.x=e.push(e.X,(e.x<0?i.get("l_originx"):e.x)+e.get("offsetx")),e.y=e.push(e.Y,(e.y<0?i.get("t_originy"):e.y)+e.get("offsety")),f=e.y+e.get("padding_top"),n=e.get("legend_space")+e.get("signwidth");for(var u=0;l>u;u++){p=e.x+e.get("padding_left"),y=e.columnheight[u]/2*e.get("line_height"),f+=y;for(var g=0;r>g&&c>u*r+g;g++)d=e.data[u*r+g],d.y=f,d.x=p,p+=e.columnwidth[g]+n;f+=y}},doConfig:function(){t.Legend.superclass.doConfig.call(this);var e=this._(),i=e.root,n=t.isNumber(e.get("column")),o=t.isNumber(e.get("row")),s=e.data.length;e.get("align")==e.C&&"middle"==e.get("valign")&&e.push("valign",e.O),i.get("align")==e.L&&"middle"==e.get("valign")&&e.push("align",e.R),t.each(e.data,function(i,n){t.merge(i,e.fireEvent(e,"parse",[e,i.name,n])),i.text=i.text||i.name||"",i.sign=i.sign||e.get("sign")},e),n||o||(n=e.push("column",1)),n&&!o&&(o=e.push("row",Math.ceil(s/e.get("column")))),!n&&o&&(n=e.push("column",Math.ceil(s/e.get("row")))),n=e.get("column"),o=e.get("row"),s>o*n&&(o+=Math.ceil((s-o*n)/n),o=e.push("row",o)),e.columnwidth=[],e.columnheight=[],e.doLayout(e,i)}}),t.Label=t.extend(t.Component,{configure:function(){t.Label.superclass.configure.apply(this,arguments),this.type="label",this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1}),this.atomic=!0,this.registerEvent()},isEventValid:function(e,i){return{valid:t.inRange(i.labelx,i.labelx+i.get(i.W),e.x)&&t.inRange(i.labely,i.labely+i.get(i.H),e.y)}},text:function(t){t&&this.push("text",t),this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(t){var e=t.get("quadrantd"),i=t.get("line_points"),n=t.get("smooth"),e=e>=1&&2>=e,o=t.get("labelx"),s=t.get("labely");t.labelx=o+(e?-t.get(t.W)-n:n),t.labely=s-t.get(t.H)/2,i[2]={x:o,y:s},i[3]={x:i[2].x+(e?-n:n),y:i[2].y}},doLayout:function(e,i,n,o){o.push("labelx",o.get("labelx")+e/n),o.push("labely",o.get("labely")+i/n),t.each(o.get("line_points"),function(t,n){return t.x+=e,t.y+=i,1==n},o),o.localizer(o)},doDraw:function(t){var e=t.get("line_points"),i=t.get("sign_size"),n=t.labelx+t.get("padding_left"),o=t.labely+t.get("padding_top");t.T.label(e,t.get("line_thickness"),t.get("border.color")),t.T.box(t.labelx,t.labely,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),!1,t.get("shadow")),t.T.textStyle(t.L,t.O,t.get("fontStyle"));var s=t.get("color");t.get("text_with_sign_color")&&(s=t.get("scolor")),"square"==t.get("sign")?t.T.box(n,o,i,i,0,t.get("scolor")):t.get("sign")&&t.T.round(n+i/2,o+i/2,i/2,t.get("scolor")),t.T.fillText(t.get("text"),n+i+t.get("sign_space"),o,t.get("textwidth"),s)},doConfig:function(){t.Label.superclass.doConfig.call(this);var e=this._();e.T.textFont(e.get("fontStyle")),e.get("fontsize")>e.get("line_height")&&e.push("line_height",e.get("fontsize")),e.get("sign")||(e.push("sign_size",0),e.push("sign_space",0)),e.push(e.H,e.get("line_height")+e.get("vpadding")),e.text(),e.localizer(e)}}),function(t){function e(e){this.canvas="string"==typeof e?t(e):e,this.c=this.canvas.getContext("2d")}var i=Math.PI,n=i/90,o=n/2,s=Math.ceil,a=Math.floor,r=2*i,l=Math.max,c=Math.min,u=Math.sin,g=Math.cos,h=function(t,e){return 1==t?a(e)+.5:Math.round(e)},d=function(t,e,i,n){var o,s,a,r,u=e.x,g=e.y,h=t[i-1],d=t[i+1];if(i<t.length-1){var p,f=h.y,y=d.y;o=(n*u+h.x)/(n+1),s=(n*g+f)/(n+1),a=(n*u+d.x)/(n+1),r=(n*g+y)/(n+1),p=(r-s)*(a-u)/(a-o)+g-r,s+=p,r+=p,s>f&&s>g?(s=l(f,g),r=2*g-s):f>s&&g>s&&(s=c(f,g),r=2*g-s),r>y&&r>g?(r=l(y,g),s=2*g-r):y>r&&g>r&&(r=c(y,g),s=2*g-r),e.rcx=a,e.rcy=r}return[h.rcx||h.x,h.rcy||h.y,o||u,s||g,u,g]},p=function(e){return t.isNumber(e)?e:t.parseFloat(e,e)},f=function(e,i){var n,o,s=0,a=0,r=!1,u=i.get("labels");if(i.data=e,"simple"==i.dataType)i.total=0,t.each(e,function(e){if(e.background_color=e.color,s=e.value||0,t.isArray(s)){var u=0;a=s.length>a?s.length:a;for(var g=0;g<s.length;g++)null!=s[g]&&(s[g]=p(s[g]),u+=s[g],r||(n=o=s[g],r=!0),n=l(s[g],n),o=c(s[g],o));e.total=u}else s=p(s),e.value=s,i.total+=s,r||(n=o=s,r=!0),n=l(s,n),o=c(s,o)},i),t.isArray(u)&&(a=u.length>a?u.length:a),i.push("maxItemSize",a);else if("stacked"==i.dataType||"complex"==i.dataType){var g,h,d,f=u.length,y="stacked"==i.dataType;if(0==f){f=e[0].value.length;for(var x=0;f>x;x++)u.push("")}i.columns=[];for(var x=0;f>x;x++)g=[],h=0,t.each(e,function(i,a){s=i.value[x],(s||0==s)&&(i.value[x]=s=p(s,s),h+=s,y?d=e[a].color:(d=i.color,r||(n=o=s,r=!0),n=l(s,n),o=c(s,o)),g.push(t.applyIf({name:i.name,value:i.value[x],background_color:d,color:d},t.isArray(i.extra)?i.extra[x]||{}:i)))}),y&&(r||(n=o=s,r=!0),n=l(h,n),o=c(h,o)),i.columns.push({total:h,name:u[x],item:g})}i.push("minValue",o),i.push("maxValue",n),i.doConfig()};e.prototype={getContext:function(){return this.c},css:function(e,i){return t.isDefined(i)?void(this.canvas.style[e]=i):this.canvas.style[e]},ellipse:function(t,e,i,o,s,a,r,l,c,h,d,p,f,y){var x=s,f=!!f;for(this.save().gCo(y).strokeStyle(l,c,h).shadowOn(d).fillStyle(r).moveTo(t,e).beginPath(),f&&this.moveTo(t,e);a>=x;)this.lineTo(t+i*g(x),e+o*u(x)),x+=n;return this.lineTo(t+i*g(a),e+o*u(a)).closePath().stroke(l).fill(r).restore()},arc:function(t,e,i,n,o,s,r,l,c,h,d,p,f,y){return l&&(i-=a(c/2)),0>=i?this:(this.save().gCo(y).strokeStyle(l,c,h).fillStyle(r).beginPath(),n?(this.moveTo(t+g(o)*(i-n),e+u(o)*(i-n)).lineTo(t+g(o)*i,e+u(o)*i),this.c.arc(t,e,i,o,s,p),this.lineTo(t+g(s)*(i-n),e+u(s)*(i-n)),this.c.arc(t,e,i-n,s,o,!p)):(this.c.arc(t,e,i,o,s,p),f&&this.lineTo(t,e)),this.closePath(),l?this.shadowOn(d).stroke(l).shadowOff().fill(r):this.shadowOn(d).fill(r),this.restore())},sector:function(t,e,i,n,o,s,a,r,l,c,u,g,h,d){return u&&this.arc(t,e,i,n,o,s,a,r,l,c,u,g,!h,!d),this.arc(t,e,i,n,o,s,a,r,l,c,!1,g,!h)},sector3D:function(){var e=function(e,i,o,s,a,r,l,c,h){var d=function(t,n){this.lineTo(e+o*g(t),i+(n||0)+s*u(t))},p=a;for(this.fillStyle(t.dark(h)).moveTo(e+o*g(a),i+s*u(a)).beginPath();r>=p;)d.call(this,p),p+=n;for(d.call(this,r),this.lineTo(e+o*g(r),i+c+s*u(r)),p=r;p>=a;)d.call(this,p,c),p-=n;d.call(this,a,c),this.lineTo(e+o*g(a),i+s*u(a)).closePath().fill(!0)},i=function(t,e,i,n,o,s,a,r){var l=t+i*g(a),c=e+s+n*u(a);this.moveTo(t,e).beginPath().fillStyle(r).lineTo(t,e+s).lineTo(l,c).lineTo(l,c-s).lineTo(t,e).closePath().fill(!0)},o=function(e,n,o,s,a,r,l,c,u){var g=t.quadrantd(a),h=t.quadrantd(r);u=t.dark(u),(1==g||2==g)&&i.call(this,e,n,o,s,l,c,a,u),(0==h||3==h)&&i.call(this,e,n,o,s,l,c,r,u)},s=function(t,i,n,s,a,r,l,c,u,g,h,d,p){return this.ellipse(t,i+l,n,s,a,r,c,u,g,h,d,p,!0),o.call(this,t,i,n,s,a,r,p,l,c),this.ellipse(t,i,n,s,a,r,c,u,g,h,!1,p,!0),e.call(this,t,i,n,s,a,r,p,l,c),this};return s.layerPaint=o,s.sPaint=e,s.layerDraw=i,s}(),textStyle:function(t,e,i){return this.textAlign(t).textBaseline(e).textFont(i)},strokeStyle:function(t,e,i,n){return t&&(e&&(this.c.lineWidth=e),i&&(this.c.strokeStyle=i),n&&(this.c.lineJoin=n)),this},globalAlpha:function(t){return t&&(this.c.globalAlpha=t),this},fillStyle:function(t){return t&&(this.c.fillStyle=t),this},arc2:function(t,e,i,n,o,s){return i&&this.c.arc(t,e,i,n,o,s),this},textAlign:function(t){return t&&(this.c.textAlign=t),this},textBaseline:function(t){return t&&(this.c.textBaseline=t),this},textFont:function(t){return t&&(this.c.font=t),this},shadowOn:function(t){return t&&(this.c.shadowColor=t.color,this.c.shadowBlur=t.blur,this.c.shadowOffsetX=t.offsetx,this.c.shadowOffsetY=t.offsety),this},shadowOff:function(){return this.c.shadowColor="rgba(0,0,0,0.0)",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(t,e,i,n,o,s,a){s=s.toLowerCase();var r=t,l=e,c=!s.indexOf("linear");if(s=s.substring(14),c){switch(s){case"updown":l+=n;break;case"downup":e+=n;break;case"leftright":r+=i;break;case"rightleft":t+=i;break;default:return o[0]}return this.avgLinearGradient(t,e,r,l,o)}return t+=i/2,e+=n/2,this.avgRadialGradient(t,e,a||0,t,e,i>n?n:i,"outin"==s?o.reverse():o)},avgLinearGradient:function(t,e,i,n,o){for(var s=this.createLinearGradient(t,e,i,n),a=0;a<o.length;a++)s.addColorStop(a/(o.length-1),o[a]);return s},createLinearGradient:function(t,e,i,n){return this.c.createLinearGradient(t,e,i,n)},avgRadialGradient:function(t,e,i,n,o,s,a){for(var r=this.createRadialGradient(t,e,i,n,o,s),l=0;l<a.length;l++)r.addColorStop(l/(a.length-1),a[l]);return r},createRadialGradient:function(t,e,i,n,o,s){return this.c.createRadialGradient(t,e,i,n,o,s)},text:function(t,e,i,n,o,s,a,r,l,c,u,g){return this.save().textStyle(s,a,r).fillText(t,e,i,n,o,l,c,u,g).restore()},fillText:function(e,i,n,s,a,r,l,c,u){if(e=e.toString(),!e||!e.length)return this;s=s||!1,r=r||"lr",l=l||16,i=h(0,i),n=h(0,n);var g=e.split("tb"==r?"":"\n");g.length>1&&("middle"==this.c.textBaseline?n-=(g.length-1)*l/2:"bottom"==this.c.textBaseline&&(n-=(g.length-1)*l)),this.save().fillStyle(a).translate(i,n).rotate(o*u).shadowOn(c);try{t.each(g,function(t,e){s&&s>0?this.c.fillText(t,0,e*l,s):this.c.fillText(t,0,e*l)},this)}catch(d){console.log(d.message+"["+e+","+i+","+n+"]")}return this.restore()},measureText:function(e){var i=0;return t.each(e.split("\n"),function(t){i=l(this.measureText(t).width,i)},this.c),i},moveTo:function(t,e){return t=t||0,e=e||0,this.c.moveTo(t,e),this},lineTo:function(t,e){return t=t||0,e=e||0,this.c.lineTo(t,e),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(t){return t&&this.c.stroke(),this},fill:function(t){return t&&this.c.fill(),this},cube:function(e,i,n,o,s,a,r,l,c,u,g,d){e=h(u,e),i=h(u,i),r=r&&r>0?r:s;var p=e+r*n,f=i-r*o;return p=h(u,p),f=h(u,f),d&&(this.polygon(l,c,u,g,d,!1,[{x:e,y:i},{x:p,y:f},{x:p+s,y:f},{x:e+s,y:i}]),this.polygon(l,c,u,g,d,!1,[{x:e,y:i},{x:e,y:i+a},{x:e+s,y:i+a},{x:e+s,y:i}]),this.polygon(l,c,u,g,d,!1,[{x:e+s,y:i},{x:p+s,y:f},{x:p+s,y:f+a},{x:e+s,y:i+a}])),this.polygon(t.dark(l),c,u,g,!1,!1,[{x:e,y:i},{x:p,y:f},{x:p+s,y:f},{x:e+s,y:i}]),this.polygon(l,c,u,g,!1,!1,[{x:e,y:i},{x:e,y:i+a},{x:e+s,y:i+a},{x:e+s,y:i}]),this.polygon(t.dark(l),c,u,g,!1,!1,[{x:e+s,y:i},{x:p+s,y:f},{x:p+s,y:f+a},{x:e+s,y:i+a}]),this},cube3D:function(e,i,n,o,s,a,r,l,c,u,g,d){if(e=h(u,e),i=h(u,i),l=l&&0!=l?l:a,s){var p=t.vectorP2P(n,o);n=e+l*p.x,o=i-l*p.y}else n=e+l*n,o=i-l*o;for(;d.length<6;)d.push(!1);n=h(u,n),o=h(u,o);var f=[];return 0>o?t.isObject(d[4])&&f.push(t.applyIf({points:[{x:e,y:i-r},{x:n,y:o-r},{x:n+a,y:o-r},{x:e+a,y:i-r}]},d[4])):t.isObject(d[0])&&f.push(t.applyIf({points:[{x:e,y:i},{x:n,y:o},{x:n+a,y:o},{x:e+a,y:i}]},d[0])),t.isObject(d[1])&&f.push(t.applyIf({points:[{x:n,y:o},{x:n,y:o-r},{x:n+a,y:o-r},{x:n+a,y:o}]},d[1])),t.isObject(d[2])&&f.push(t.applyIf({points:[{x:e,y:i},{x:e,y:i-r},{x:n,y:o-r},{x:n,y:o}]},d[2])),t.isObject(d[3])&&f.push(t.applyIf({points:[{x:e+a,y:i},{x:e+a,y:i-r},{x:n+a,y:o-r},{x:n+a,y:o}]},d[3])),0>o?t.isObject(d[0])&&f.push(t.applyIf({points:[{x:e,y:i},{x:n,y:o},{x:n+a,y:o},{x:e+a,y:i}]},d[0])):t.isObject(d[4])&&f.push(t.applyIf({points:[{x:e,y:i-r},{x:n,y:o-r},{x:n+a,y:o-r
},{x:e+a,y:i-r}]},d[4])),t.isObject(d[5])&&f.push(t.applyIf({points:[{x:e,y:i},{x:e,y:i-r},{x:e+a,y:i-r},{x:e+a,y:i}]},d[5])),t.each(f,function(t){this.polygon(t.color,c,u,g,t.shadow,t.alpha,t.points)},this),this},polygon:function(t,e,i,n,o,s,a,r,l,c){if(this.save().strokeStyle(e,i,n).beginPath().fillStyle(t).globalAlpha(s).shadowOn(o).moveTo(a[0].x,a[0].y),r){this.moveTo(h(i,c[0].x),h(i,c[0].y)).lineTo(h(i,a[0].x),h(i,a[0].y));for(var u=1;u<a.length;u++)this.bezierCurveTo(d(a,a[u],u,l));this.lineTo(h(i,c[1].x),h(i,c[1].y))}else for(var u=1;u<a.length;u++)this.lineTo(h(i,a[u].x),h(i,a[u].y));return this.closePath().stroke(e).fill(t).restore()},lines:function(t,e,i,n){if(!e)return this;this.save().gCo(n).beginPath().strokeStyle(!0,e,i).moveTo(h(e,t[0]),h(e,t[1]));for(var o=2;o<t.length-1;o+=2)this.lineTo(h(e,t[o]),h(e,t[o+1]));return this.stroke(!0).restore()},bezierCurveTo:function(t){return this.c.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),this},label:function(t,e,i){return this.save().beginPath().strokeStyle(!0,e,i).moveTo(h(e,t[0].x),h(e,t[0].y)).bezierCurveTo([t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]).stroke(!0).restore()},lineArray:function(t,e,i,n,o){if(!e)return this;this.save().beginPath().strokeStyle(!0,e,i).moveTo(h(e,t[0].x),h(e,t[0].y));for(var s=1;s<t.length;s++)n?this.bezierCurveTo(d(t,t[s],s,o||1.5)):this.lineTo(h(e,t[s].x),h(e,t[s].y));return this.stroke(!0).restore()},dotted:function(e,i,n,o,s,r,l,c,u){if(!s)return this;e=h(s,e),i=h(s,i),n=h(s,n),o=h(s,o);var g,d=t.distanceP2P(e,i,n,o);if(0>=l||l>=d||e!=n&&i!=o)return this.line(e,i,n,o,s,r,u);(e>n||i>o)&&(g=e,e=n,n=g,g=i,i=o,o=g),this.save().gCo(u).strokeStyle(!0,s,r).beginPath().moveTo(e,i);var p=l*(c||1),f=a(d/(l+p)),y=d-f*(l+p)>l,x=i==o;f=y?f+1:f;for(var _=1;f>=_;_++)this.lineTo(x?e+l*_+p*(_-1):e,x?i:i+l*_+p*(_-1)).moveTo(x?e+(l+p)*_:e,x?i:i+(l+p)*_);return y||this.lineTo(n,o),this.stroke(!0).restore()},line:function(t,e,i,n,o,s,a){return o?(this.save().gCo(a),this.beginPath().strokeStyle(!0,o,s).moveTo(h(o,t),h(o,e)).lineTo(h(o,i),h(o,n)).stroke(!0).restore()):this},round:function(t,e,i,n,o,s){return this.arc(t,e,i,0,0,r,n,!!s,o,s)},round0:function(t,e,i,n,o){return this.arc(t.x,t.y,e,0,0,r,i,!!o,n,o)},fillRect:function(t,e,i,n){return this.c.fillRect(t,e,i,n),this},translate:function(t,e){return this.c.translate(t,e),this},rotate:function(t){return this.c.rotate(t),this},clearRect:function(t,e,i,n){return t=t||0,e=e||0,i=i||this.canvas.width,n=n||this.canvas.height,this.c.clearRect(t,e,i,n),this},gCo:function(t){return t?this.gCO(t):this},gCO:function(t){return this.c.globalCompositeOperation=t?"destination-over":"source-over",this},box:function(e,n,o,l,c,u,g,d,p){if(c=c||{enable:0},c.enable){var f=c.width,y=c.color,x=c.radius,_=t.isNumber(f);f=t.parsePadding(f),f[0]==f[1]&&f[1]==f[2]&&f[2]==f[3]&&(_=!0),d=d?1:-1,o+=d*(f[1]+f[3])/2,l+=d*(f[0]+f[2])/2,e-=d*(f[3]/2),n-=d*(f[0]/2),f=_?f[0]:f,x=_&&x&&0!=x&&"0"!=x?t.parsePadding(x):0}return this.save().gCo(p).fillStyle(u).strokeStyle(_,f,y),x?this.beginPath().moveTo(h(f,e+x[0]),h(f,n)).lineTo(h(f,e+o-x[1]),h(f,n)).arc2(h(f,e+o-x[1]),h(f,n+x[1]),x[1],3*i/2,r).lineTo(h(f,e+o),h(f,n+l-x[2])).arc2(h(f,e+o-x[2]),h(f,n+l-x[2]),x[2],0,i/2).lineTo(h(f,e+x[3]),h(f,n+l)).arc2(h(f,e+x[3]),h(f,n+l-x[3]),x[3],i/2,i).lineTo(h(f,e),h(f,n+x[0])).arc2(h(f,e+x[0]),h(f,n+x[0]),x[0],i,3*i/2).closePath().shadowOn(g).stroke(f).shadowOff().fill(u):!c.enable||_?(f&&c.enable&&(this.shadowOn(g).c.strokeRect(e,n,o,l),this.shadowOff()),u&&this.fillRect(e,n,o,l)):(f&&(y=t.isArray(y)?y:[y,y,y,y],this.shadowOn(g).line(e+o,n+f[0]/2,e+o,n+l-f[0]/2,f[1],y[1],0).line(e,n+f[0]/2,e,n+l-f[0]/2,f[3],y[3],0).line(a(e-f[3]/2),n,e+o+f[1]/2,n,f[0],y[0],0).line(a(e-f[3]/2),n+l,e+o+f[1]/2,n+l,f[2],y[2],0).shadowOff()),u&&this.beginPath().moveTo(a(e+f[3]/2),a(n+f[0]/2)).lineTo(s(e+o-f[1]/2),n+f[0]/2).lineTo(s(e+o-f[1]/2),s(n+l-f[2]/2)).lineTo(a(e+f[3]/2),s(n+l-f[2]/2)).lineTo(a(e+f[3]/2),a(n+f[0]/2)).closePath().fill(u)),this.restore()},toDataURL:function(t){return this.canvas.toDataURL(t||"image/png")},addEvent:function(e,i,n){t.Event.addEvent(this.canvas,e,i,n)}},t.taylor={light:function(t,e){e.highlight=!1,t.on("mouseover",function(){e.highlight=!0,t.redraw("mouseover")}).on("mouseout",function(){e.highlight=!1,t.redraw("mouseout")}).on("beforedraw",function(){return t.push("f_color",e.highlight?t.get("light_color"):t.get("f_color_")),!0})}},t.Chart=t.extend(t.Painter,{configure:function(){t.Chart.superclass.configure.apply(this,arguments),this.type="chart",this.dataType="simple",this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,empty:{text:"No data found",fontsize:16},title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}}),this.registerEvent("beforeAnimation","afterAnimation","resize","animating"),this.T=null,this.Rendered=!1,this.Combination=!1,this.Animationed=!1,this.show=!1,this.data=[],this.plugins=[],this.components=[],this.oneways=[],this.total=0,this._chart=!0},toDataURL:function(t){return this.T.toDataURL(t)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(e){e.segmentRect(),e.coo&&!e.ILLUSIVE_COO&&e.coo.draw(),e.doAnimation(e.variable.animation.time,e.duration,e),t.each(e.plugins,function(t){t.A_draw&&(t.variable.animation.animating=!0,t.variable.animation.time=e.variable.animation.time,t.draw(),t.variable.animation.animating=!1)}),e.Combination||(t.each(e.oneways,function(t){t.draw()}),e.variable.animation.time<e.duration?(e.variable.animation.time++,t.requestAnimFrame(function(){e.animation(e)})):t.requestAnimFrame(function(){e.Animationed=!0,t.each(e.plugins,function(t){t.Animationed=!0}),e.processAnimation=!1,e.draw(),t.each(e.plugins,function(t){t.processAnimation=!1}),e.fireEvent(e,"afterAnimation",[e])}))},runAnimation:function(t){t.fireEvent(t,"beforeAnimation",[t]),t.A_draw||(t.variable.animation={type:0,time:0,queue:[]}),t.processAnimation=!0,t.animation(t)},doSort:function(){var e=function(e,i){return(t.isArray(e)?e.zIndex||0:e.get("z_index"))>(t.isArray(i)?i.zIndex||0:i.get("z_index"))};t.sor(this.components,e),t.sor(this.oneways,e)},commonDraw:function(e,i){return e.show=!1,e.redraw||(t.Assert.isTrue(e.Rendered,e.type+" has not rendered"),e.doSort()),e.redraw=!0,!e.Animationed&&e.get("animation")?void e.runAnimation(e):(e.segmentRect(),t.eachAll(e.components,function(t){t.draw(i)}),t.eachAll(e.components,function(t){t.last&&t.last(t)}),t.each(e.oneways,function(t){t.draw()}),void(e.show=!0))},plugin:function(t){var e=this._();t.inject(e),t._chart&&(t.Combination=!0,t.setUp()),e.get("animation")||t.push("animation",!1),t.duration=e.duration,t._plugin=!0,e.register(t),e.plugins.push(t)},destroy:function(e){t.eachAll(e.components,function(t){t._plugin||t.destroy(t)}),t.each(e.oneways,function(t){t.destroy(t)})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(i,n){if(i.get("fit")){var o=window.innerWidth,s=window.innerHeight,a=t.getDoc().body.style;a.padding="0px",a.margin="0px",a.overflow="hidden",i.push(i.W,o),i.push(i.H,s)}i.canvasid=t.uid(i.type),i.shellid="shell_"+i.canvasid;var r=[];r.push("<div id='"),r.push(i.shellid),r.push("' style='padding:0px;margin:0px auto;overflow:hidden;position:relative"),i.get("background_wrap")&&(r.push(";background-color:"),r.push(i.get("background_color")),i.push("background_color",null)),r.push(";'>"),r.push("<canvas id= '"),r.push(i.canvasid),r.push("' style='-webkit-text-size-adjust: none;'>"),r.push("<p>Your browser does not support the canvas element</p></canvas>"),r.push("</div>"),n.innerHTML=r.join(""),i.shell=t(i.shellid),i.T=i.target=new e(i.canvasid),i.size(i),i.Rendered=!0},setUp:function(){var t=this._();t.redraw=!1,t.T.clearRect(),t.initialize()},load:function(t){var e=this._();e.push("data",t||[]),e.setUp(),(e.Combination?e.root:e).draw()},resize:function(e,i){e=t.parseFloat(e),i=t.parseFloat(i);var n=this._();n.Combination||(n.width=n.push(n.W,e),n.height=n.push(n.H,i),n.size(n)),n.fireEvent(n,"resize",[e,i]),n.setUp(),t.eachAll(n.plugins,function(t){t.Combination&&t.resize(e,i)}),n.Combination||n.draw()},size:function(e){var i=t.ratio,n=e.pushIf(e.W,400),o=e.pushIf(e.H,300),s=e.T.canvas;e.shell.style.width=s.style.width=n+"px",e.shell.style.height=s.style.height=o+"px",s.width=(e.width=n)*i,s.height=(e.height=o)*i,i>1&&e.T.c.scale(i,i)},initialize:function(){var e=this._(),i=e.get("data"),n=e.get("render");e.push(e.X,null),e.push(e.Y,null),e.Combination?(t.apply(e.options,t.clone([e.W,e.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],e.root.options,!0)),e.width=e.get(e.W),e.height=e.get(e.H),e.shell=e.root.shell,e.Rendered=!0):e.Rendered||n&&e.create(e,t(n)),e.Rendered&&(t.isString(e.get("url"))&&!i?e.ajax.call(e,e.get("url"),function(t){e.push("data",t),e.initialize(),e.draw()}):f.call(e,i||[],e))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(e){e.T.strokeStyle(!0,0,e.get("strokeStyle"),e.get("lineJoin")),e.processAnimation=e.get("animation"),t.isFunction(e.get("doAnimation"))&&(e.doAnimation=e.get("doAnimation")),e.animationArithmetic=t.getAA(e.get("animation_timing_function"));var i,n,o=[e.components,e.oneways],a=e.variable.event,r=e.Combination,l=!e.get("turn_off_touchmove")&&!r,c=!t.touch&&e.get("default_mouseover_css")&&!r,u=t.touch?["touchstart","touchmove"]:["click","mousemove"];e.stopEvent=!1,e.A_draw=r&&e.processAnimation,t.register(e),r||t.each(u,function(i){e.T.addEvent(i,function(n){e.processAnimation||e.stopEvent||!e.show||n.targetTouches&&1!=n.targetTouches.length||e.fireEvent(e,i,[e,t.Event.fix(n)])},!1)}),e.on(u[0],function(e,i){return t.eachAll(o,function(t){if(t._chart){if(t.fireEvent(t,u[0],[t,i]))return a.click=!0,!1}else{var e=t.isMouseOver(i);if(e.valid)return a.click=!0,t.fireEvent(t,"click",[t,i,e]),!i.stopPropagation}}),a.click?(l&&i.event.preventDefault(),a.click=!1,!0):void 0}),(!t.touch||l)&&(e.on(u[1],function(e,s){return i=n=!1,t.eachAll(o,function(t){if(!t._chart){var e=t.variable.event,n=t.isMouseOver(s);if(n.valid){if(i=i||t.atomic,e.mouseover||(e.mouseover=!0,t.fireEvent(t,"mouseover",[t,s,n])),t.fireEvent(t,"mousemove",[t,s,n]),n.stop)return!1}else e.mouseover&&(e.mouseover=!1,t.fireEvent(t,"mouseout",[t,s,n]));return!s.stopPropagation}return t.fireEvent(t,u[1],[t,s])?(i=!0,!1):void 0}),a.mouseover?(s.event.preventDefault(),i||(a.mouseover=!1,e.fireEvent(e,"mouseout",[e,s])),a.mouseover):void(i&&(a.mouseover=i,e.fireEvent(e,"mouseover",[e,s])))}),c&&e.on("mouseover",function(){e.T.css("cursor","pointer")}).on("mouseout",function(){e.T.css("cursor","default")})),e.Combination||(e.bg=new t.Custom({z_index:-1,drawFn:function(){e.T.box(0,0,e.width,e.height,e.get("border"),e.get("f_color"),0,0,!0)}}),e.duration=s(e.get("animation_duration")*t.FRAME/1e3)),e.oneWay=t.emptyFn},originXY:function(t,e,i){var n=t.get("align");return n==t.L?t.pushIf(t.X,e[0]):n==t.R?t.pushIf(t.X,e[1]):t.pushIf(t.X,e[2]),t.x=t.push(t.X,t.get(t.X)+t.get("offsetx")),t.y=t.push(t.Y,i[0]+t.get("offsety")),{x:t.x,y:t.y}},percent:function(t,e){return this.get("showpercent")?(100*(t/(e||this.total||1))).toFixed(this.get("decimalsnum"))+"%":t},doActing:function(e,i,n,o,s){var a=!!e.get("communal_acting"),r=e.percent(i.value,i.total);e.push(a?"sub_option":"communal_acting",t.clone(e.get(a?"communal_acting":"sub_option"),!0)),t.merge(e.get("sub_option"),i,n),e.push("sub_option.value",r),e.push("sub_option.value_",i.value),e.get("sub_option.tip.enable")&&(e.push("sub_option.tip.text",s||i.name+" "+r),e.push("sub_option.tip.name",i.name),e.push("sub_option.tip.index",o),e.push("sub_option.tip.value",i.value),e.push("sub_option.tip.total",i.total||e.total))},register:function(e){return e.id=t.uid(e.type),this.components.push(e),e},isE:function(){return!this.data.length},remove:function(e,i){i&&t.each(e.components,function(t,n){return i.id==t.id?(e.components.splice(n,1),!1):void 0})},merge:function(e,i){var n=this._();t.isString(n.get(e))&&n.push(e,t.applyIf({text:n.get(e)},n.default_[e])),i&&""!=n.get(e).text&&i(n)},doConfig:function(){t.Chart.superclass.doConfig.call(this);var e=this._();if(e.destroy(e),e.oneways.length=0,e.oneWay(e),e.get("shadow")!==!1&&e.push("shadow",{color:e.get("shadow_color"),blur:e.get("shadow_blur"),offsetx:e.get("shadow_offsetx"),offsety:e.get("shadow_offsety")}),t.apply(e.get("sub_option"),t.clone(["shadow","tip"],e.options,!0)),e.push("communal_acting",0),!e.Combination){e.oneways.push(e.bg),e.push("r_originx",e.width-e.get("padding_right")),e.push("b_originy",e.height-e.get("padding_bottom")),e.applyGradient();var i,n=0,o=e.push("l_originx",e.get("padding_left")),s=e.push("t_originy",e.get("padding_top")),a=e.push("client_width",e.width-e.get("hpadding"));e.merge("subtitle"),e.merge("title",function(){var i=""!=e.get("subtitle.text");n=i?e.get("title.height")+e.get("subtitle.height"):e.get("title.height"),s=e.push("t_originy",s+n),e.push("title.originx",o),e.push("title.originy",e.get("padding_top")),e.push("title.maxwidth",a),e.pushIf("title.width",a),e.title=new t.Text(e.get("title"),e),e.oneways.push(e.title),i&&(e.push("subtitle.originx",o),e.push("subtitle.originy",e.get("padding_top")+e.get("title.height")),e.pushIf("subtitle.width",a),e.push("subtitle.maxwidth",a),e.subtitle=new t.Text(e.get("subtitle"),e),e.oneways.push(e.subtitle))}),e.merge("footnote",function(){var i=e.get("footnote.height");n+=i,e.push("b_originy",e.get("b_originy")-i),e.push("footnote.originx",o),e.push("footnote.originy",e.get("b_originy")),e.push("footnote.maxwidth",a),e.pushIf("footnote.width",a),e.footnote=new t.Text(e.get("footnote"),e),e.oneways.push(e.footnote)}),i=e.push("client_height",e.get(e.H)-e.get("vpadding")-e.pushIf("other_height",n)),e.push("minDistance",c(a,i)),e.push("maxDistance",l(a,i)),e.push("centerx",o+a/2),e.push("centery",s+i/2)}e.isE()&&e.merge("empty",function(){e.push("empty.originx",e.get("centerx")),e.push("empty.originy",e.get("centery")),e.push("empty.textBaseline","middle"),e.empty=new t.Text(e.get("empty"),e),e.oneways.push(e.empty)}),e.get("legend.enable")&&(e.legend=new t.Legend(t.apply({maxwidth:e.get("client_width"),data:e.data},e.get("legend")),e),e.oneways.push(e.legend)),e.push("sub_option.tip.wrap",e.push("tip.wrap",e.shell))}})}(t),t.Custom=t.extend(t.Component,{configure:function(){t.Custom.superclass.configure.apply(this,arguments),this.type="custom",this.set({drawFn:t.emptyFn,configFn:t.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(t){t.get("drawFn").call(t,t)},isEventValid:function(e,i){return t.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,e,i):{valid:!1}},doConfig:function(){t.Custom.superclass.doConfig.call(this);var e=this._();e.A_draw=e.get("animating_draw"),e.variable.animation={animating:!1,time:0},e.duration=0,e.get("configFn").call(e,e)}}),t.Sector=t.extend(t.Component,{configure:function(){t.Sector.superclass.configure.apply(this,arguments),this.type="sector",this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1}),this.atomic=!0,this.registerEvent("changed","parseText"),this.label=null,this.tip=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var t=this._();return{x:t.x,x:t.y,startAngle:t.get("startAngle"),middleAngle:t.get("middleAngle"),endAngle:t.get("endAngle")}},doDraw:function(t){t.get("ignored")||(t.label&&!t.get("mini_label")&&t.label.draw(),t.drawSector(),t.label&&t.get("mini_label")&&t.label.draw())},doText:function(e,i,n){e.push("label.originx",i),e.push("label.originy",n),e.push("label.textBaseline","middle"),e.label=new t.Text(e.get("label"),e)},doLabel:function(e,i,n,o,s,a,r,l){e.push("label.originx",i),e.push("label.originy",n),e.push("label.quadrantd",o),e.push("label.line_points",s),e.push("label.labelx",a),e.push("label.labely",r),e.push("label.smooth",l),e.push("label.angle",e.get("middleAngle")%(2*Math.PI)),e.label=new t.Label(e.get("label"),e)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){t.Sector.superclass.doConfig.call(this);var e,i=this._(),n=i.variable.event,o=i.get("label"),s=i.get("bound_event");return i.get("rounded")?(i.push("startAngle",0),void i.push("endAngle",2*Math.PI)):(t.taylor.light(i,n),i.push("totalAngle",i.get("endAngle")-i.get("startAngle")),o&&(i.get("mini_label")&&(i.get("mini_label_threshold_angle")*Math.PI/180>i.get("totalAngle")?i.push("mini_label",!1):t.apply(i.get("label"),i.get("mini_label"))),i.push("label.text",i.fireString(i,"parseText",[i,i.get("label.text")],i.get("label.text"))),i.pushIf("label.border.color",i.get("border.color")),i.push("label.scolor",i.get("background_color"))),i.variable.event.status=i.expanded=i.get("expand"),i.get("tip.enable")&&("follow"!=i.get("tip.showType")&&i.push("tip.invokeOffsetDynamic",!1),i.tip=new t.Tip(i.get("tip"),i)),n.poped=!1,i.on(s,function(){n.poped=!0,i.expanded=!i.expanded,i.redraw(s),n.poped=!1}),void i.on("beforedraw",function(t,a){return a==s&&(e=!1,i.x=i.get(i.X),i.y=i.get(i.Y),i.expanded&&(i.get("mutex")&&!n.poped?(i.expanded=!1,e=!0):(i.x+=i.get("inc_x"),i.y-=i.get("inc_y"))),n.status!=i.expanded&&(i.fireEvent(i,"changed",[i,i.expanded]),e=!0,n.status=i.expanded),o&&e&&i.label.doLayout(i.get("inc_x")*(i.expanded?1:-1),-i.get("inc_y")*(i.expanded?1:-1),2,i.label)),!0}))}}),t.Sector2D=t.extend(t.Sector,{configure:function(){t.Sector2D.superclass.configure.apply(this,arguments),this.type="sector2d",this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(e,i){if(!i.get("ignored")){if(i.isLabel()&&i.label.isEventValid(e,i.label).valid)return{valid:!0};var n=t.distanceP2P(i.x,i.y,e.x,e.y),o=i.get("donutwidth");if(i.r<n||o&&i.r-o>n)return{valid:!1};if(t.angleInRange(i.get("startAngle"),i.get("endAngle"),t.atan2Radian(i.x,i.y,e.x,e.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var e=this,i=e.get("middleAngle"),n=t.quadrantd(i);return function(o,s){var a=t.p2Point(e.x,e.y,i,.8*e.r);return{left:n>=1&&2>=n?a.x-o:a.x,top:n>=2?a.y-s:a.y}}},doConfig:function(){t.Sector2D.superclass.doConfig.call(this);var e=this._();e.r=e.get("radius"),e.get("donutwidth")>e.r&&e.push("donutwidth",0),e.applyGradient(e.x-e.r,e.y-e.r,1.8*e.r,1.8*e.r);var i=e.get("middleAngle"),n=e.pushIf("increment",t.lowTo(5,e.r/10));if(e.push("inc_x",n*Math.cos(2*Math.PI-i)),e.push("inc_y",n*Math.sin(2*Math.PI-i)),n*=2,e.get("label"))if(e.get("mini_label"))P2=t.p2Point(e.x,e.y,i,e.get("donutwidth")?e.r-e.get("donutwidth")/2:5*e.r/8),e.doText(e,P2.x,P2.y);else{var o=t.quadrantd(i),s=t.p2Point(e.x,e.y,i,e.r+n),a=t.p2Point(e.x,e.y,i,e.r+.6*n);P2=t.p2Point(e.x,e.y,i,e.r),e.doLabel(e,P2.x,P2.y,o,[{x:P2.x,y:P2.y},{x:a.x,y:a.y},{x:s.x,y:s.y}],s.x,s.y,.4*n)}}}),t.Sector3D=t.extend(t.Sector,{configure:function(){t.Sector3D.superclass.configure.apply(this,arguments),this.type="sector3d",this.dimension=t._3D,this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0}),this.proxy=!0},isEventValid:function(e,i){if(!i.get("ignored")){if(i.isLabel()&&i.label.isEventValid(e,i.label).valid)return{valid:!0};if(!t.inEllipse(e.x-i.x,e.y-i.y,i.a,i.b))return{valid:!1};if(t.angleZInRange(i.sA,i.eA,t.atan2Radian(i.x,i.y,e.x,e.y)))return{valid:!0}}return{valid:!1}},p2p:function(t,e,i,n){return{x:t+this.a*Math.cos(i)*n,y:e+this.b*Math.sin(i)*n}},tipInvoke:function(){var e=this,i=e.get("middleAngle"),n=t.quadrantd(i);return function(t,o){var s=e.p2p(e.x,e.y,i,.6);return{left:n>=2&&3>=n?s.x-t:s.x,top:n>=3?s.y-o:s.y}}},doConfig:function(){t.Sector3D.superclass.doConfig.call(this);var e=this._(),i=e.get("counterclockwise"),n=e.get("middleAngle");e.a=e.get("semi_major_axis"),e.b=e.get("semi_minor_axis"),e.h=e.get("cylinder_height"),t.Assert.isTrue(e.a*e.b>=0,"major&minor");var o=2*Math.PI,s=function(n){for(;0>n;)n+=o;return Math.abs(t.atan2Radian(0,0,e.a*Math.cos(n),i?-e.b*Math.sin(n):e.b*Math.sin(n)))},a=e.pushIf("increment",t.lowTo(5,e.a/10));if(e.sA=s.call(e,e.get("startAngle")),e.eA=s.call(e,e.get("endAngle")),e.mA=s.call(e,n),e.push("inc_x",a*Math.cos(o-e.mA)),e.push("inc_y",a*Math.sin(o-e.mA)),a*=2,e.get("label"))if(e.get("mini_label")){var r=e.p2p(e.x,e.y,n,.5);e.doText(e,r.x,r.y)}else{var l=t.quadrantd(n),c=e.p2p(e.x,e.y,n,a/e.a+1),u=e.p2p(e.x,e.y,n,.6*a/e.a+1),g=e.p2p(e.x,e.y,n,1);e.doLabel(e,g.x,g.y,l,[{x:g.x,y:g.y},{x:u.x,y:u.y},{x:c.x,y:c.y}],c.x,c.y,.4*a)}}}),t.Rectangle=t.extend(t.Component,{configure:function(){t.Rectangle.superclass.configure.apply(this,arguments),this.type="rectangle",this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1}),this.atomic=!0,this.registerEvent("parseText"),this.label=null},last:function(t){t.label&&t.label.draw()},doDraw:function(t){t.drawRectangle()},doConfig:function(){t.Rectangle.superclass.doConfig.call(this);var e=this._(),i=e.variable.event,n=e.get("valueAlign");t.taylor.light(e,i),e.width=e.get(e.W),e.height=e.get(e.H);var o=e.push("centerx",e.x+e.width/2),s=e.push("centery",e.y+e.height/2),a=e.C,r="middle",l=e.get("value_space");n==e.L?(a=e.R,o=e.x-l):n==e.R?(a=e.L,o=e.x+e.width+l):n==e.B?(s=e.y+e.height+l,r=e.O):n==e.O&&(s=e.y-l,r=e.B),e.get("label")&&(e.push("label.originx",o),e.push("label.originy",s),e.push("label.text",e.push("value",e.fireString(e,"parseText",[e,e.get("value")],e.get("value")))),t.applyIf(e.get("label"),{textAlign:a,textBaseline:r,color:e.get("color")}),e.label=new t.Text(e.get("label"),e)),e.get("tip.enable")&&("follow"!=e.get("tip.showType")&&e.push("tip.invokeOffsetDynamic",!1),e.tip=new t.Tip(e.get("tip"),e))}}),t.Rectangle2D=t.extend(t.Rectangle,{configure:function(){t.Rectangle2D.superclass.configure.apply(this,arguments),this.type="rectangle2d",this.set({shadow_offsety:-2})},drawRectangle:function(){var t=this._();t.T.box(t.get(t.X),t.get(t.Y),t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},tipInvoke:function(){var t=this._();return function(e,i){return{left:t.tipX(e,i),top:t.tipY(e,i)}}},doConfig:function(){t.Rectangle2D.superclass.doConfig.call(this);var e=this._(),i=e.get("tipAlign");i==e.L||i==e.R?e.tipY=function(t,i){return e.get("centery")-i/2}:e.tipX=function(t){return e.get("centerx")-t/2},i==e.L?e.tipX=function(t){return e.x-e.get("value_space")-t}:i==e.R?e.tipX=function(){return e.x+e.width+e.get("value_space")}:e.tipY=i==e.B?function(){return e.y+e.height+3}:function(t,i){return e.y-i-3},e.applyGradient()}}),t.Rectangle3D=t.extend(t.Rectangle,{configure:function(){t.Rectangle3D.superclass.configure.apply(this,arguments),this.type="rectangle3d",this.dimension=t._3D,this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var t=this._();t.T.cube(t.get(t.X),t.get(t.Y),t.get("xAngle_"),t.get("yAngle_"),t.get(t.W),t.get(t.H),t.get("zHeight"),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("light_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.get(e.W)&&t.y<e.y+e.get(e.H)&&t.y>e.y}},tipInvoke:function(){var t=this._();return function(e,i){return{left:t.topCenterX-e/2,top:t.topCenterY-i}}},doConfig:function(){t.Rectangle3D.superclass.doConfig.call(this);var e=this._();e.pushIf("zHeight",e.get(e.W)),e.topCenterX=e.x+(e.get(e.W)+e.get(e.W)*e.get("xAngle_"))/2,e.topCenterY=e.y-e.get(e.W)*e.get("yAngle_")/2-e.get("value_space"),e.get("valueAlign")==e.O&&e.label&&(e.label.push("textx",e.topCenterX),e.label.push("texty",e.topCenterY))}}),t.Column=t.extend(t.Chart,{configure:function(){t.Column.superclass.configure.call(this),this.type="column",this.set({coordinate:{},column_width:"66%",column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}}),this.registerEvent(),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},doAnimation:function(e,i,n){var o;t.each(n.labels,function(t){t.draw()}),t.each(n.rectangles,function(t){o=Math.ceil(n.animationArithmetic(e,0,t.height,i)),t.push(n.Y,t.y+(t.height-o)),t.push(n.H,o),t.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(e,i,n,o,s){e.labels.push(new t.Text(t.apply(e.get("label"),{id:i,text:n,originx:o,originy:s}),e))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},engine:function(t){if(!t.isE()){var e=t.get("column_width_"),i=t.get("column_space"),n=t.coo.getScale(t.get("scaleAlign")),o=t.coo.valid_height,s=e/2,a=e*(t.get("group_fator")||0),r="complex"!=t.dataType?e+i:t.data.length*e+i+(t.is3D()?(t.data.length-1)*a:0),l=t.coo.get("y_end"),c=l-n.basic*o-(t.is3D()?t.get("zHeight")*(t.get("bottom_scale")-1)/2*t.get("yAngle_"):0),u=i+t.coo.get("x_start");l=l+t.get("text_space")+t.coo.get("axis.width")[2],t.doEngine(t,e,i,n,o,s,a,r,u,c,l)}},doConfig:function(){t.Column.superclass.doConfig.call(this);var e=this._(),i="column_width",n="z_index";e.sub=e.is3D()?"Rectangle3D":"Rectangle2D",e.rectangles.length=0,e.labels.length=0,e.rectangles.zIndex=e.get(n),e.labels.zIndex=e.get(n)+1,e.coo=t.Coordinate.coordinate_.call(e,function(){var n,o=e.data.length,s=e.get("coordinate.valid_width_value");"complex"==e.dataType?(n=e.get("labels").length,o=n*o+(e.is3D()?(o-1)*n*e.get("group_fator"):0),n+=1):("stacked"==e.dataType&&(o=e.get("labels").length),n=o+1),e.push("column_space",(s-e.push("sub_option.width",e.push("column_width_",t.parsePercent(e.get(i),Math.floor(s/o))))*o)/n),e.is3D()&&(e.push("sub_option.zHeight",e.push("zHeight",e.get("column_width_")*e.get("zScale"))),e.push("sub_option.xAngle_",e.get("xAngle_")),e.push("sub_option.yAngle_",e.get("yAngle_")))})}}),t.Column2D=t.extend(t.Column,{configure:function(){t.Column2D.superclass.configure.call(this),this.type="column2d"},doEngine:function(e,i,n,o,s,a,r,l,c,u,g){var h;t.each(e.data,function(i,n){h=(i.value-o.start)*s/o.distance,e.doParse(e,i,n,{id:n,originx:c+n*l,originy:u-(h>0?h:0),height:Math.abs(h)}),e.rectangles.push(new t[e.sub](e.get("sub_option"),e)),e.doLabel(e,n,i.name,c+l*n+a,g)},e)},doConfig:function(){t.Column2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("Column2D"),t.Column3D=t.extend(t.Column2D,{configure:function(){t.Column3D.superclass.configure.call(this),this.type="column3d",this.dimension=t._3D,this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){t.Column3D.superclass.doConfig.call(this)}}),t.register("Column3D"),t.ColumnMulti2D=t.extend(t.Column,{configure:function(){t.ColumnMulti2D.superclass.configure.call(this),this.type="columnmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(e,i,n,o,s,a,r,l,c,u,g){var h;t.each(e.columns,function(a,d){t.each(a.item,function(n,a){h=(n.value-o.start)*s/o.distance,e.doParse(e,n,d+"_"+a,{id:d+"_"+a,originx:c+a*(i+r)+d*l,originy:u-(h>0?h:0),height:Math.abs(h)}),e.rectangles.push(new t[e.sub](e.get("sub_option"),e))},e),e.doLabel(e,d,a.name,c-.5*n+(d+.5)*l,g)},e)},doConfig:function(){t.ColumnMulti2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("ColumnMulti2D"),t.ColumnMulti3D=t.extend(t.ColumnMulti2D,{configure:function(){t.ColumnMulti3D.superclass.configure.call(this),this.type="columnmulti3d",this.dataType="complex",this.dimension=t._3D,this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){t.ColumnMulti3D.superclass.doConfig.call(this)}}),t.register("ColumnMulti3D"),t.ColumnStacked2D=t.extend(t.Column,{configure:function(){t.ColumnStacked2D.superclass.configure.call(this),this.type="columnstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(e,i,n,o,s,a,r,l,c,u,g){var h,d,p,f=e.get("percent");t.each(e.columns,function(i,a){h=0,p=f?100/i.total:1,t.each(i.item,function(n,r){d=(n.value*p-o.start)*s/o.distance,n.total=i.total,e.doParse(e,n,a+"_"+r,{id:a+"_"+r,originx:c+a*l,originy:u-(d>0?d:0)-h,height:Math.abs(d)}),h+=d,e.rectangles.push(new t[e.sub](e.get("sub_option"),e))},e),e.doLabel(e,a,i.name,c-.5*n+(a+.5)*l,g)},e)},doConfig:function(){t.ColumnStacked2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("ColumnStacked2D"),t.ColumnStacked3D=t.extend(t.ColumnStacked2D,{configure:function(){t.ColumnStacked3D.superclass.configure.call(this),this.type="columnstacked3d",this.dataType="stacked",this.dimension=t._3D,this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){t.ColumnStacked3D.superclass.doConfig.call(this)}}),t.register("ColumnStacked3D"),t.Bar=t.extend(t.Chart,{configure:function(){t.Bar.superclass.configure.call(this),this.type="bar",this.set({coordinate:{striped_direction:"h"},bar_height:"66%",bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}}),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},getCoordinate:function(){return this.coo},doLabel:function(e,i,n,o,s){e.labels.push(new t.Text(t.apply(e.get("label"),{id:i,text:n,textAlign:"right",textBaseline:"middle",originx:o,originy:s}),e))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},engine:function(t){if(!t.isE()){var e=t.get("_bar_height"),i=t.get("bar_space"),n=t.coo.getScale(t.get("scaleAlign")),o=t.coo.valid_width,s=e/2,a="complex"!=t.dataType?e+i:t.data.length*e+i,r=t.coo.get("x_start")+n.basic*o,l=t.coo.get(t.X)-t.get("text_space")-t.coo.get("axis.width")[3],c=t.coo.get("y_start")+i;t.doEngine(t,e,i,n,o,s,a,r,l,c)}},doAnimation:function(e,i,n){t.each(n.labels,function(t){t.draw()}),t.each(n.rectangles,function(t){t.push(n.W,Math.ceil(n.animationArithmetic(e,0,t.width,i))),t.drawRectangle()})},doConfig:function(){t.Bar.superclass.doConfig.call(this);var e=this._(),i="z_index";e.rectangles.length=0,e.labels.length=0,e.rectangles.zIndex=e.get(i),e.labels.zIndex=e.get(i)+1,e.coo=t.Coordinate.coordinate_.call(e,function(){var i,n=e.data.length,o=e.get("coordinate.valid_height_value");"complex"==e.dataType?(i=e.get("labels").length,n=i*n+(e.is3D()?(n-1)*i*e.get("group_fator"):0),i+=1):("stacked"==e.dataType&&(n=e.get("labels").length),i=n+1),e.push("bar_space",(o-e.push("sub_option.height",e.push("_bar_height",t.parsePercent(e.get("bar_height"),Math.floor(o/n))))*n)/i)}),e.push("sub_option.valueAlign",e.R),e.push("sub_option.tipAlign",e.R)}}),t.Bar2D=t.extend(t.Bar,{configure:function(){t.Bar2D.superclass.configure.call(this),this.type="bar2d"},doEngine:function(e,i,n,o,s,a,r,l,c,u){var g;t.each(e.data,function(i,n){g=(i.value-o.start)*s/o.distance,
e.doParse(e,i,n,{id:n,originy:u+n*r,width:Math.abs(g),originx:l+(g>0?0:-Math.abs(g))}),e.rectangles.push(new t.Rectangle2D(e.get("sub_option"),e)),e.doLabel(e,n,i.name,c,u+n*r+a)},e)},doConfig:function(){t.Bar2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("Bar2D"),t.BarStacked2D=t.extend(t.Bar,{configure:function(){t.BarStacked2D.superclass.configure.call(this),this.type="barstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(e,i,n,o,s,a,r,l,c,u){var g,h,d,p=e.get("percent");t.each(e.columns,function(i,a){g=0,d=p?100/i.total:1,t.each(i.item,function(n,c){h=(n.value*d-o.start)*s/o.distance,n.total=i.total,e.doParse(e,n,c,{id:a+"_"+c,originy:u+a*r,originx:l+(h>0?0:-Math.abs(h))+g,width:Math.abs(h)}),g+=h,e.rectangles.push(new t.Rectangle2D(e.get("sub_option"),e))},e),e.doLabel(e,a,i.name,c,u-.5*n+(a+.5)*r)},e)},doConfig:function(){t.BarStacked2D.superclass.doConfig.call(this),this.push("sub_option.valueAlign",this.C),this.engine(this)}}),t.register("BarStacked2D"),t.BarMulti2D=t.extend(t.Bar,{configure:function(){t.BarMulti2D.superclass.configure.call(this),this.type="barmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(e,i,n,o,s,a,r,l,c,u){var g;t.each(e.columns,function(a,h){t.each(a.item,function(n,a){g=(n.value-o.start)*s/o.distance,e.doParse(e,n,a,{id:h+"_"+a,originy:u+a*i+h*r,width:Math.abs(g),originx:l+(g>0?0:-Math.abs(g))}),e.rectangles.push(new t.Rectangle2D(e.get("sub_option"),e))},e),e.doLabel(e,h,a.name,c,u-.5*n+(h+.5)*r)},e)},doConfig:function(){t.BarMulti2D.superclass.doConfig.call(this),this.engine(this)}}),t.register("BarMulti2D"),t.Tip=t.extend(t.Html,{configure:function(){t.Tip.superclass.configure.apply(this,arguments),this.type="tip",this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200}),this.registerEvent("parseText")},position:function(t,e,i){i.style.top=(0>t?0:t)+"px",i.style.left=(0>e?0:e)+"px"},follow:function(e,i,n){if(n.get("invokeOffsetDynamic")){if(i.hit){(t.isString(i.text)||t.isNumber(i.text))&&n.text(i.name,i.value,i.text,i.i,n);var o=n.get("invokeOffset")(n.width(),n.height(),i);n.position(o.top,o.left,n)}}else if("follow"!=n.get("showType")&&t.isFunction(n.get("invokeOffset"))){var o=n.get("invokeOffset")(n.width(),n.height(),i);n.position(o.top,o.left,n)}else n.position(e.y-1.1*n.height()-2,e.x+2,n)},text:function(t,e,i,n,o){o.dom.innerHTML=o.fireString(o,"parseText",[o,t,e,i,n],i)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(t){t.T.on("mouseover",function(e,i,n){t.show(i,n)}).on("mouseout",function(e,i){t.hidden(i)}),"follow"==t.get("showType")&&t.T.on("mousemove",function(e,i,n){t.T.variable.event.mouseover&&setTimeout(function(){t.T.variable.event.mouseover&&t.follow(i,n,t)},t.get("delay"))})},initialize:function(){t.Tip.superclass.initialize.call(this);var e=this._();if(e.text(e.get("name"),e.get("value"),e.get("text"),e.get("index"),e),e.hidden(),e.get("animation")){var i=e.get("move_duration")/1e3+"s "+e.get("timing_function")+" 0s";e.transition("opacity "+e.get("fade_duration")/1e3+"s "+e.get("timing_function")+" 0s"),e.transition("top "+i),e.transition("left "+i),e.onTransitionEnd(function(){0==e.css("opacity")&&e.css("visibility","hidden")},!1)}}}),t.Text=t.extend(t.Component,{configure:function(){t.Text.superclass.configure.apply(this,arguments),this.type="text",this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0}),this.registerEvent()},doDraw:function(t){t.get("box_feature")&&t.T.box(t.x,t.y,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color")),t.T.text(t.get("text"),t.get("textx"),t.get("texty"),t.get(t.W)-t.get("hpadding"),t.get("color"),t.get("textAlign"),t.get("textBaseline"),t.get("fontStyle"),t.get("writingmode"),t.get("line_height"),t.get("shadow"),t.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(t,e,i,n){n.x=n.push(n.X,n.x+t),n.y=n.push(n.Y,n.y+e),n.push("textx",n.get("textx")+t),n.push("texty",n.get("texty")+e)},doConfig:function(){t.Text.superclass.doConfig.call(this);var e=this._(),i=e.x,n=e.y+e.get("padding_top"),o=e.get(e.W),s=e.get(e.H),a=e.get("textAlign");i+=a==e.C?o/2:a==e.R?o-e.get("padding_right"):e.get("padding_left"),s&&(n+=s/2,e.push("textBaseline","middle")),e.push("textx",i),e.push("texty",n),e.push("box_feature",o&&s),e.applyGradient()}}),t.Pie=t.extend(t.Chart,{configure:function(){t.Pie.superclass.configure.call(this),this.type="pie",this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}}),this.registerEvent("bound","rebound"),this.sectors=[],this.components.push(this.sectors),this.ILLUSIVE_COO=!0},toggle:function(t){this.sectors[t||0].toggle()},bound:function(t){this.sectors[t||0].bound()},rebound:function(t){this.sectors[t||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(e,i,n){var o=0,s=n.oA;t.each(n.sectors,function(t){o=n.animationArithmetic(e,0,t.get("totalAngle"),i),t.push("startAngle",s),t.push("endAngle",s+=o),n.is3D()||t.drawSector()}),n.is3D()&&n.proxy.drawSector()},parse:function(e){t.each(e.data,function(t,i){e.doParse(e,t,i)},e),e.localizer(e)},doParse:function(t,e,i){var n=e.name+" "+t.percent(e.value);t.doActing(t,e,null,i,n),t.push("sub_option.id",i),t.get("sub_option.label")&&t.push("sub_option.label.text",n),t.push("sub_option.listeners.changed",function(e,i){t.fireEvent(t,i?"bound":"rebound",[t,e.get("name")])}),t.sectors.push(t.doSector(t,e))},doSector:function(e){return new t[e.sub](e.get("sub_option"),e)},dolayout:function(e,i,n,o,s,a){(e.is3D()?t.inEllipse(e.get(e.X)-i,e.topY-n,e.a,e.b):t.distanceP2P(e.get(e.X),e.topY,i,n)<e.r)&&(n=e.topY-n,o.push("labelx",e.get(e.X)+(2*Math.sqrt(e.r*e.r-n*n)+s)*(0==a||3==a?1:-1)),o.localizer(o))},localizer:function(e){if(e.get("intellectLayout")){var i,n,o,s=[],a=[],r=e.get("layout_distance");t.each(e.sectors,function(t){t.isLabel()&&s.push(t.label)}),t.sor(s,function(t,e){return Math.abs(Math.sin(t.get("angle")))-Math.abs(Math.sin(e.get("angle")))>0}),t.each(s,function(s){t.each(a,function(t){n=t.labelx,o=t.labely,(s.labely<=o&&o-s.labely-1<s.get(e.H)||s.labely>o&&s.labely-o-1<t.get(e.H))&&(s.labelx<=n&&n-s.labelx<s.get(e.W)||s.labelx>n&&s.labelx-n<t.get(e.W))&&(i=s.get("quadrantd"),s.push("labely",s.get("labely")+o-s.labely+(s.get(e.H)+r)*(i>1?-1:1)),s.localizer(s),e.dolayout(e,s.get("labelx"),s.get("labely")+s.get(e.H)/2*(2>i?-1:1),s,r,i))},e),a.push(s)})}},doConfig:function(){t.Pie.superclass.doConfig.call(this);var e,i=this._(),n=i.get("radius"),o=i.get("sub_option.label")?.35:.44,s=2*Math.PI;i.sub=i.is3D()?"Sector3D":"Sector2D",i.sectors.zIndex=i.get("z_index"),i.sectors.length=0,i.oA=t.angle2Radian(i.get("offset_angle"))%s,i.is3D()&&(o+=.06);var a=i.data.length,r=t.angle2Radian(t.between(0,90,i.get("separate_angle"))),l=s-r,r=r/a,c=i.oA+r,u=c;0==i.total&&(e=1/a),t.each(i.data,function(t,n){c+=(e||t.value/i.total)*l,n==a-1&&(c=s+i.oA),t.startAngle=u,t.endAngle=c,t.totalAngle=c-u,t.middleAngle=(u+c)/2,u=c+r},i),i.r=n=t.parsePercent(n,Math.floor(i.get("minDistance")*o)),i.topY=i.originXY(i,[n+i.get("l_originx"),i.get("r_originx")-n,i.get("centerx")],[i.get("centery")]).y,t.apply(i.get("sub_option"),t.clone([i.X,i.Y,"bound_event","mutex","increment"],i.options))}}),t.Pie2D=t.extend(t.Pie,{configure:function(){t.Pie2D.superclass.configure.call(this),this.type="pie2d"},doConfig:function(){t.Pie2D.superclass.doConfig.call(this);var e=this._();e.push("sub_option.radius",e.r),e.parse(e)}}),t.register("Pie2D"),t.Pie3D=t.extend(t.Pie,{configure:function(){t.Pie3D.superclass.configure.apply(this,arguments),this.type="pie3d",this.dimension=t._3D,this.set({zRotate:45,yHeight:30}),this.positive=!0},doSector:function(e,i){return e.push("sub_option.cylinder_height",i.cylinder_height?i.cylinder_height*e.get("zRotate_"):e.get("cylinder_height")),new t[e.sub](e.get("sub_option"),e)},one:function(e){var i,n,o,s=[],a=e.get("counterclockwise"),r=function(t,e){return 1+Math.sin(e?t+Math.PI:t)},l="startAngle",c="endAngle";lay=function(e,n,s,a){o=t.quadrantd(n),(e&&(0==o||3==o)||!e&&(2==o||1==o))&&i.push({g:n,z:n==s,x:a.x,y:a.y,a:a.a,b:a.b,color:t.dark(a.get("background_color")),h:a.h,F:a})},e.proxy=new t.Custom({z_index:e.get("z_index")+1,drawFn:function(){this.drawSector(),s=[],t.each(e.sectors,function(t){t.get("label")&&(t.expanded?s.push(t.label):t.label.draw())}),t.each(s,function(t){t.draw()})}}),e.proxy.drawSector=function(){t.each(e.sectors,function(t){e.T.ellipse(t.x,t.y+t.h,t.a,t.b,t.get(l),t.get(c),0,t.get("border.enable"),t.get("border.width"),t.get("border.color"),t.get("shadow"),a,!0)},e),i=[],n=[],t.each(e.sectors,function(e){lay(a,e.get(l),e.get(c),e),lay(!a,e.get(c),e.get(l),e),n=n.concat(t.visible(e.get(l),e.get(c),e))},e),t.sor(i,function(t,e){var i=r(t.g)-r(e.g);return 0==i?t.z:i>0}),t.each(i,function(t){e.T.sector3D.layerDraw.call(e.T,t.x,t.y,t.a+.5,t.b+.5,a,t.h,t.g,t.color)},e),e.processAnimation||t.sor(n,function(t,e){return r((t.s+t.e)/2,1)-r((e.s+e.e)/2,1)<0}),t.each(n,function(t){e.T.sector3D.sPaint.call(e.T,t.f.x,t.f.y,t.f.a,t.f.b,t.s,t.e,a,t.f.h,t.f.get("f_color"))},e),t.each(e.sectors,function(t){e.T.ellipse(t.x,t.y,t.a,t.b,t.get(l),t.get(c),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("border.color"),!1,!1,!0)},e)},e.components.push(e.proxy),e.one=t.emptyFn},doConfig:function(){t.Pie3D.superclass.doConfig.call(this);var e=this._(),i=t.angle2Radian(e.get("zRotate"));e.push("cylinder_height",e.get("yHeight")*e.push("zRotate_",Math.abs(Math.cos(i)))),e.a=e.push("sub_option.semi_major_axis",e.r),e.b=e.push("sub_option.semi_minor_axis",e.r*Math.abs(Math.sin(i))),e.topY=e.push("sub_option.originy",e.get(e.Y)-e.get("yHeight")/2),e.parse(e),e.one(e)}}),t.register("Pie3D"),t.Donut2D=t.extend(t.Pie,{configure:function(){t.Donut2D.superclass.configure.call(this),this.type="donut2d",this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){t.Donut2D.superclass.doConfig.call(this);var e=this._(),i="donutwidth",n=e.get(i),o=e.r;e.push("sub_option.radius",o),n>=o?n=0:1>n&&(n=Math.floor(o*n)),e.push("sub_option.donutwidth",e.push(i,n)),e.merge("center"),""!=e.get("center.text")&&(e.push("center.originx",e.get(e.X)),e.push("center.originy",e.get(e.Y)),e.push("center.textBaseline","middle"),e.center=new t.Text(e.get("center"),e),e.oneways.push(e.center)),e.parse(e)}}),t.register("Donut2D"),t.Scale=t.extend(t.Component,{configure:function(){t.Scale.superclass.configure.apply(this,arguments),this.type="scale",this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2}),this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(e){var i=[e.get("basic_value"),e.get("start_scale"),e.get("end_scale"),e.get("end_scale")-e.get("start_scale"),0];return i[4]=t.inRange(i[1],i[2]+1,i[0])||t.inRange(i[2]-1,i[1],i[0]),{range:i[4],basic:i[4]?(i[0]-i[1])/i[3]:0,start:i[4]?i[0]:i[1],end:i[2],distance:i[3]}},doDraw:function(e){e.get("scale_enable")&&t.each(e.items,function(t){e.T.line(t.x0,t.y0,t.x1,t.y1,e.get("scale_size"),e.get("scale_color"),!1)}),t.each(e.labels,function(t){t.draw()})},doLayout:function(e,i,n){n.get("scale_enable")&&t.each(n.items,function(t){t.x0+=e,t.y0+=i,t.x1+=e,t.y1+=i}),t.each(n.labels,function(t){t.doLayout(e,i,0,t)})},doConfig:function(){t.Scale.superclass.doConfig.call(this);var e=this._(),i=Math.abs,n=e.get("labels").length,o=n-1,s=e.get("min_scale"),a=e.get("max_scale"),r=e.get("scale_space"),l=e.get("end_scale"),c=e.get("start_scale");if(e.items=[],e.labels=[],0==n){o=5,c>s&&(c=e.push("start_scale",t.floor(s))),(!t.isNumber(l)||a>l)&&(l=t.ceil(a),l=e.push("end_scale",l||c?l:1));var u=i(l-c);if(r&&i(r)<i(u))o=i(Math.ceil(u/r));else{for(var g=u.toString(),h=g.indexOf(".")+1,d=10,p=(h>0?/^0\.0*([1-9])$/:/^([1-9])0*$/).exec(g);h>0;)h--,d*=10;p&&p[1]&&(o=parseInt(p[1])),o=1==o?5:o,o=8==o||2==o?4:o,o=9==o?3:o,r=e.push("scale",u*d/o/d)}parseInt(r)!=r&&0==e.get("decimalsnum")&&e.push("decimalsnum",(r+"").substring((r+"").indexOf(".")+1).length)}e.push("distanceOne",e.get("valid_distance")/e.push("scale_share",o));var f,y,x,_=0,v=0,b=0,m=0,w=0,T=0,C=e.get("scale_width"),A=C/2,D=e.get("scaleAlign"),k=e.get("position"),E=e.get("text_space"),S="",P=e.get("coo").get("axis.width");e.push("which",e.get("which").toLowerCase()),e.isH="h"==e.get("which"),e.isH?(D==e.O?m=-C:D==e.C?(m=-A,v=A):v=C,k==e.O?(T=-E-P[0],S=e.B):(T=E+P[2],S=e.O),k=e.C):(D==e.L?b=-C:D==e.C?(b=-A,_=A):_=C,S="middle",k==e.R?(k=e.L,w=E+P[1]):(k=e.R,w=-E-P[3]));for(var z=0;o>=z;z++)f=n?e.get("labels")[z]:(r*z+c).toFixed(e.get("decimalsnum")),y=e.isH?e.get("valid_x")+z*e.get("distanceOne"):e.x,x=e.isH?e.y:e.get("valid_y")+e.get("valid_distance")-z*e.get("distanceOne"),e.items.push({x:y,y:x,x0:y+b,y0:x+m,x1:y+_,y1:x+v}),e.get("label")&&e.labels.push(new t.Text(t.applyIf(t.apply(e.get("label"),t.merge({text:f,x:y,y:x,originx:y+w,originy:x+T},e.fireEvent(e,"parseText",[f,y+w,x+T,z,o==z]))),{textAlign:k,textBaseline:S}),e))}}),t.Coordinate={coordinate_:function(e){var i=this._(),n=i.get("coordinate"),o=i.get("scaleAlign");if(n.ICHARTJS_OBJECT)return i.x=i.push(i.X,n.x),i.y=i.push(i.Y,n.y),i.ILLUSIVE_COO=!0,n.refresh(i.get("minValue"),i.get("maxValue"),o),n;var s="85%",a=t.parsePercent,r=i.get("coordinate.scale"),l=i.push("coordinate._width",a(i.get("coordinate.width")||s,Math.floor(i.get("client_width"))));if(h=i.push("coordinate._height",a(i.get("coordinate.height")||s,Math.floor(i.get("client_height")))-(i.is3D()?(i.get("coordinate.pedestal_height")||22)+(i.get("coordinate.board_deep")||20):0)),i.push("coordinate.valid_height_value",a(i.get("coordinate.valid_height"),h)),i.push("coordinate.valid_width_value",a(i.get("coordinate.valid_width"),l)),i.originXY(i,[i.get("l_originx"),i.get("r_originx")-l,i.get("centerx")-l/2],[i.get("centery")-h/2]),i.set({coordinate:{originx:i.x,originy:i.y,id:"coordinate"}}),e&&e(),t.isObject(r)&&(r=[r]),t.isArray(r)){var c="stacked"!=i.dataType;t.each(r,function(e){i.get("percent")&&e.position==o&&(e=t.apply(e,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(t){return{text:t+"%"}}}})),(!e.start_scale||c&&!e.assign_scale&&e.start_scale>i.get("minValue"))&&(e.min_scale=i.get("minValue")),(!e.end_scale||c&&!e.assign_scale&&e.end_scale<i.get("maxValue"))&&(e.max_scale=i.get("maxValue"))})}else i.push("coordinate.scale",{position:o,scaleAlign:o,max_scale:i.get("maxValue"),min_scale:i.get("minValue")});return i.is3D()&&i.set({coordinate:{xAngle_:i.get("xAngle_"),yAngle_:i.get("yAngle_"),zHeight:i.get("zHeight")*i.get("bottom_scale")}}),i.remove(i,i.coo),i.isE()?void 0:i.register(new(t[i.is3D()?"Coordinate3D":"Coordinate2D"])(i.get("coordinate"),i))}},t.Coordinate2D=t.extend(t.Component,{configure:function(){t.Coordinate2D.superclass.configure.apply(this,arguments),this.type="coordinate2d",this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}}),this.scale=[],this.gridlines=[]},refresh:function(e,i,n){t.each(this.scale,function(t){if(t.get("position")==n){var o;return(!t.get("assign_scale")||t.get("end_scale")<i)&&(t.push("max_scale",t.push("end_scale",i)),o=!0),(!t.get("assign_scale")||t.get("start_scale")>e)&&(t.push("min_scale",t.push("start_scale",e)),o=!0),o&&t.doConfig(),!1}})},getScaleObj:function(t,e){for(var i=this._(),n=0;n<i.scale.length;n++)if(i.scale[n].get("position")==t)return i.scale[n];if(!e)return t=t==i.L?i.R:t==i.R?i.L:t==i.O?i.B:i.O,i.getScaleObj(t,!0);throw new Error("InValidScale")},getScale:function(t,e){var i=this.getScaleObj(t,e);return i.getScale(i)},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},doDraw:function(e){if(e.T.box(e.x,e.y,e.width,e.height,0,e.get("f_color")),e.get("striped"))var i,n,o=!1,s=(e.get("axis.width"),t.dark(e.get("background_color"),e.get("striped_factor"),0));var a="v"==e.get("striped_direction");t.each(e.gridlines,function(t){e.get("striped")&&(o&&(a?e.T.box(t.x1,t.y1+t.width,t.x2-t.x1,n-t.y1-t.width,0,s):e.T.box(i+t.width,t.y2,t.x1-i,t.y1-t.y2,0,s)),i=t.x1,n=t.y1,o=!o)}),t.each(e.gridlines,function(t){t.overlap||(t.solid?e.T.line(t.x1,t.y1,t.x2,t.y2,t.width,t.color):e.T.dotted(t.x1,t.y1,t.x2,t.y2,t.width,t.color,t.size,t.fator))}),e.T.box(e.x,e.y,e.width,e.height,e.get("axis"),!1,e.get("shadow"),!0),t.each(e.scale,function(t){t.draw()})},destroy:function(){this.crosshair&&this.crosshair.destroy()},doCrosshair:function(e){e.get("crosshair.enable")&&!e.crosshair&&(e.push("crosshair.wrap",e.root.shell),e.push("crosshair.height",e.height),e.push("crosshair.width",e.width),e.push("crosshair.top",e.y),e.push("crosshair.left",e.x),e.crosshair=new t.CrossHair(e.get("crosshair"),e))},doConfig:function(){t.Coordinate2D.superclass.doConfig.call(this);var e=this._();if(e.atomic=!1,e.width=e.get("_width"),e.height=e.get("_height"),e.valid_width=e.get("valid_width_value"),e.valid_height=e.get("valid_height_value"),e.get("gradient")&&t.isString(e.get("f_color"))&&e.push("f_color",e.T.avgLinearGradient(e.x,e.y,e.x,e.y+e.height,[e.get("dark_color"),e.get("light_color")])),e.get("axis.enable")){var i=e.get("axis.width");t.isArray(i)||e.push("axis.width",[i,i,i,i])}else e.push("axis.width",[0,0,0,0]);e.doCrosshair(e);var n,o=!(!e.get("gridlinesVisible")||!e.get("grids")),s=o&&!!e.get("grids.horizontal"),a=o&&!!e.get("grids.vertical"),r=e.height,l=e.width,c=e.valid_width,u=e.valid_height,g=e.get("gridlinesVisible")&&e.get("scale2grid")&&!(s&&a),h=e.push("x_start",e.x+(l-c)/2),d=e.push("y_start",e.y+(r-u)/2),p=e.get("axis.width");e.push("x_end",e.x+(l+c)/2),e.push("y_end",e.y+(r+u)/2),t.isArray(e.get("scale"))||(t.isObject(e.get("scale"))?e.push("scale",[e.get("scale")]):e.push("scale",[])),t.each(e.get("scale"),function(i){n=i.position,n=n||e.L,n=n.toLowerCase(),i[e.X]=e.x,i.coo=e,i[e.Y]=e.y,i.valid_x=h,i.valid_y=d,i.position=n,n==e.O?(i.which="h",i.distance=l,i.valid_distance=c):n==e.R?(i.which="v",i.distance=r,i.valid_distance=u,i[e.X]+=l,i.valid_x+=c):n==e.B?(i.which="h",i.distance=l,i.valid_distance=c,i[e.Y]+=r,i.valid_y+=u):(i.which="v",i.distance=r,i.valid_distance=u),i.label=t.applyIf(i.label||{},e.get("label")),e.scale.push(new t.Scale(i,e.root))},e);var f=e.push("ignoreOverlap",e.get("ignoreOverlap")&&e.get("axis.enable")||e.get("ignoreEdge"));if(f)if(e.get("ignoreEdge"))var y=function(t,i,n){return"v"==t?n==e.y||n==e.y+r:i==e.x||i==e.x+t};else var y=function(t,i,n){return"v"==t?n==e.y&&p[0]>0||n==e.y+r&&p[2]>0:i==e.x&&p[3]>0||i==e.x+l&&p[1]>0};var x={solid:!0,size:10,fator:1,width:e.get("grid_line_width"),color:e.get("grid_color")},_=t.applyIf(e.get("gridHStyle"),x),v=t.applyIf(e.get("gridVStyle"),x);if(g){var b,m,w;t.each(e.scale,function(i){w=i.get("position"),t.isFalse(i.get("scale2grid"))||s&&"v"==i.get("which")||a&&"h"==i.get("which")||(b=m=0,w==e.O?m=r:w==e.R?b=-l:w==e.B?m=-r:b=l,t.each(i.items,function(n){f&&e.gridlines.push(t.applyIf({overlap:y.call(e,i.get("which"),n.x,n.y),x1:n.x,y1:n.y,x2:n.x+b,y2:n.y+m},i.isH?v:_))}))})}if(a){var T=e.get("grids.vertical"),C=l/T.value,A=T.value;"given_value"==T.way&&(A=C,C=T.value,C=C>l?l:C);for(var D=0;A>=D;D++)f&&e.gridlines.push(t.applyIf({overlap:y.call(e,"h",e.x+D*C,e.y),x1:e.x+D*C,y1:e.y,x2:e.x+D*C,y2:e.y+r,H:!1,width:v.width,color:v.color},v))}if(s){var k=e.get("grids.horizontal"),C=r/k.value,A=k.value;"given_value"==k.way&&(A=C,C=k.value,C=C>r?r:C);for(var D=0;A>=D;D++)f&&e.gridlines.push(t.applyIf({overlap:y.call(e,"v",e.x,e.y+D*C),x1:e.x,y1:e.y+D*C,x2:e.x+l,y2:e.y+D*C,H:!0,width:_.width,color:_.color},_))}}}),t.Coordinate3D=t.extend(t.Coordinate2D,{configure:function(){t.Coordinate3D.superclass.configure.apply(this,arguments),this.type="coordinate3d",this.dimension=t._3D,this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(e){var i=e.width,n=e.height,o=e.get("xAngle_"),s=e.get("yAngle_"),a=e.get("zHeight"),r=e.get("z_offx"),l=e.get("z_offy");e.get("pedestal_height")&&e.T.cube3D(e.x,e.y+n+e.get("pedestal_height"),o,s,!1,i,e.get("pedestal_height"),3*a/2,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("bottom_style")),e.get("board_deep")&&e.T.cube3D(e.x+r,e.y+n-l,o,s,!1,i,n,e.get("board_deep"),e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("board_style")),e.T.cube3D(e.x,e.y+n,o,s,!1,i,n,a,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("wall_style")),t.each(e.gridlines,function(t){t.solid?(e.get("left_board")&&e.T.line(t.x1,t.y1,t.x1+r,t.y1-l,t.width,t.color),e.T.line(t.x1+r,t.y1-l,t.x2+r,t.y2-l,t.width,t.color)):(e.get("left_board")&&e.T.dotted(t.x1,t.y1,t.x1+r,t.y1-l,t.width,t.color,t.size,t.fator),e.T.dotted(t.x1+r,t.y1-l,t.x2+r,t.y2-l,t.width,t.color,t.size,t.fator))}),t.each(e.scale,function(t){t.draw()})},doConfig:function(){t.Coordinate3D.superclass.doConfig.call(this);for(var e=this._(),i=e.get("wall_style"),n=e.get("background_color")||"#d6dbd2",o=e.height,s=e.width,a=e.get("color_factor"),r=e.push("z_offx",e.get("xAngle_")*e.get("zHeight")),l=e.push("z_offy",e.get("yAngle_")*e.get("zHeight"));i.length<6;)i.push({color:n});e.get("left_board")||(i[2]=!1,t.each(e.scale,function(t){t.doLayout(r,-l,t)})),e.push("bottom_style",[{color:e.get("shadow_color"),shadow:e.get("shadow")},!1,!1,{color:i[3].color},!1,{color:i[3].color}]),e.push("board_style",[!1,!1,!1,{color:i[4].color},{color:i[5].color},!1]),e.get("gradient")&&(t.isString(i[0].color)&&(i[0].color=e.T.avgLinearGradient(e.x,e.y+o,e.x+s,e.y+o,[t.dark(i[0].color,a/2+.06),t.dark(i[0].color,a/2+.06)])),t.isString(i[1].color)&&(i[1].color=e.T.avgLinearGradient(e.x+r,e.y-l,e.x+r,e.y+o-l,[t.dark(i[1].color,a),t.light(i[1].color,a)])),t.isString(i[2].color)&&(i[2].color=e.T.avgLinearGradient(e.x,e.y,e.x,e.y+o,[t.light(i[2].color,a/3),t.dark(i[2].color,a)])),e.get("bottom_style")[5].color=e.T.avgLinearGradient(e.x,e.y+o,e.x,e.y+o+e.get("pedestal_height"),[t.light(i[3].color,a/2+.06),t.dark(i[3].color,a/2,0)])),e.push("wall_style",[i[0],i[1],i[2]])}}),t.CrossHair=t.extend(t.Html,{configure:function(){t.CrossHair.superclass.configure.apply(this,arguments),this.type="crosshair",this.set({top:0,left:0,hcross:!0,vcross:!0,point:{enable:!0,color:null,size:12},invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(t,e,i){if(i.get("invokeOffset")){var n=i.get("invokeOffset")(t,e);n&&n.hit?(i.o_valid=!0,i.position(n.top-i.top,n.left-i.left,i)):n&&i.o_valid||i.position(i.owidth,i.oheight,i)}else i.position(t.y-i.top-1,t.x-i.left-1,i)},position:function(t,e,i){i.horizontal.style.top=t-i.size+"px",i.vertical.style.left=e-i.size+"px",i.point&&(i.point.style.top=t-i.point.size/2+"px",i.point.style.left=e-i.point.size/2+"px")},doCreate:function(e,i,n,o){var s=document.createElement("div");return s.style.width=t.toPixel(i),s.style.height=t.toPixel(n),s.style.backgroundColor=o,s.style.position="absolute",e.dom.appendChild(s),s},doAction:function(t){t.T.on("mouseover",function(e,i,n){t.show(i,n)}).on("mouseout",function(e,i,n){t.hidden(i,n)}).on("mousemove",function(e,i,n){t.follow(i,n,t)})},initialize:function(){t.CrossHair.superclass.initialize.call(this);var e=this._(),i=e.get("line_width"),n=e.get("hcross"),o=e.get("vcross"),s=e.get("line_color"),a=e.get("point.size");e.size=i/2,e.top=t.fixPixel(e.get(e.O)),e.left=t.fixPixel(e.get(e.L)),e.owidth=-e.T.root.width,e.oheight=-e.T.root.height,e.o_valid=!1,e.css("width","0px"),e.css("height","0px"),e.css("top",e.top+"px"),e.css("left",e.left+"px"),e.css("visibility","hidden"),e.horizontal=e.doCreate(e,n?e.get(e.W):0,i,s),e.vertical=e.doCreate(e,i,o?e.get(e.H):0,s),n&&o&&e.get("point.enable")&&(e.point=e.doCreate(e,a,a,e.get("point.color")||s),e.point.style.borderRadius="100%",e.point.size=a)}}),t.LineSegment=t.extend(t.Component,{configure:function(){t.LineSegment.superclass.configure.apply(this,arguments),this.type="linesegment",this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0}),this.registerEvent("parseText"),this.tip=null},drawSegment:function(){var e=this._();t.each(e.polygons,function(t){e.T.polygon.apply(e.T,t)}),e.T.shadowOn(e.get("shadow")),t.each(e.lines,function(t){e.T.lineArray.apply(e.T,t)}),t.each(e.intersections,function(t){e.sign_plugin?e.sign_plugin_fn.apply(e,t):e.T.round0.apply(e.T,t)}),e.get("shadow")&&e.T.shadowOff()},doDraw:function(e){e.drawSegment(),e.get("label")&&t.each(e.labels,function(t){t.draw()})},isEventValid:function(){},tipInvoke:function(){var t=this.x,e=(this.y,this.get("tip_offset")),i=this.get("point_size")+e,n=this;return function(o,s,a){var r=a.left,l=a.top;return r=n.tipPosition<3&&r-o-t-e>0||n.tipPosition>2&&0>r-o-t-e?r-(o+e):r+e,l=0==n.tipPosition%2?l+i:l-s-i,{left:r,top:l}}},PP:function(t,e,i,n,o,s){t.get("area")&&t.polygons.push([t.tf("area_color")||t.get("light_color2"),0,t.get("brushsize"),0,0,t.get("area_opacity"),t.get("smooth")?e:[{x:i,y:n}].concat(e.concat([{x:o,y:s}])),t.get("smooth"),t.get("smoothing")||1.5,[{x:i,y:n},{x:o,y:s}]])},parse:function(e){e.polygons=[],e.lines=[],e.intersections=[],e.labels=[];var i=e.get("points"),n=e.get("intersection"),o=!!e.get("label"),s=[],a=!1,r=e.get("smooth"),l=e.get("smoothing")||1.5,c=e.get("f_color"),u=e.get("brushsize"),g=e.get("point_size");if(n){var h=e.getPlugin("sign"),d=c,p=e.get("hollow_color");e.sign_plugin=t.isFunction(h),e.sign_plugin_fn=h,e.get("hollow_inside")&&(d=p,p=c)}t.each(i,function(i){i.x_=i.x,i.y_=i.y,i.ignored||i.direct||!o||(e.push("label.originx",i.x),e.push("label.originy",i.y-g/2-1),e.push("label.text",e.fireString(e,"parseText",[e,i.value],i.value)),t.applyIf(e.get("label"),{textBaseline:"bottom",color:e.get("f_color")}),e.labels.push(new t.Text(e.get("label"),e))),i.ignored&&a?(e.lines.push([s,u,c,r,l]),e.PP(e,s,s[0].x,e.y,s[s.length-1].x,e.y),s=[],a=!1):i.ignored||i.direct||(s.push(i),a=!0),!n||i.ignored||i.direct||e.intersections.push(e.sign_plugin?[e.T,e.get("sign"),i,g,i.color||d,i.hollow_color||p]:e.get("hollow")?[i,g/2-u+1,i.color||d,u+1,i.hollow_color||p]:[i,g/2,i.color||d])}),s.length&&(e.lines.push([s,u,c,r,l]),e.PP(e,s,s[0].x,e.y,s[s.length-1].x,e.y))},doConfig:function(){t.LineSegment.superclass.doConfig.call(this);var e=this._(),i=3*e.get("point_size")/2,n=e.get("point_space"),o=e.get("event_range_y"),s=e.get("event_range_x"),a=e.get("tipInvokeHeap"),r=e.get("points"),l=e.get("name");t.Assert.isTrue(n>0,"point_space"),e.parse(e),(0>=s||s>n/2)&&(s=e.push("event_range_x",n/2)),0==o&&(o=e.push("event_range_y",i/2)),e.get("tip.enable")&&(e.on("mouseover",function(){a.push(e),e.tipPosition=a.length}).on("mouseout",function(){a.pop()}),e.push("tip.invokeOffsetDynamic",!0),e.tip=new t.Tip(e.get("tip"),e));var c=e.get("coordinate"),u=e.get("limit_y"),g=e.get("keep_with_coordinate"),h=function(t,e,i){return!(t.ignored||!(Math.abs(e-t.x)<s)||u&&!(u&&Math.abs(i-t.y)<o))},d=function(t){return{valid:!0,name:l,value:r[t].value,text:r[t].text,top:r[t].y,left:r[t].x,i:t,hit:!0}};e.isEventValid=function(i){if(c&&!c.isEventValid(i,c).valid)return{valid:!1};var o=Math.floor((i.x-e.x)/n);if(0>o||o>=r.length-1)return o=t.between(0,r.length-1,o),h(r[o],i.x,i.y)?d(o):{valid:g};for(var s=o;o+1>=s;s++)if(h(r[s],i.x,i.y))return d(s);return{valid:g}}}}),t.Line=t.extend(t.Chart,{configure:function(){t.Line.superclass.configure.call(this),this.type="line",this.set({nullToDirect:!0,brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}}),this.registerEvent("parsePoint"),this.lines=[],this.components.push(this.lines),this.on("resize",function(){this.push("point_space",0)})},getCoordinate:function(){return this.coo},doConfig:function(){t.Line.superclass.doConfig.call(this);var e=this._(),i=1==e.data.length;e.lines.length=0,e.lines.zIndex=e.get("z_index");var n=e.pushIf("sub_option.keep_with_coordinate",i);if(e.get("crosshair.enable")&&(e.pushIf("crosshair.hcross",i),e.pushIf("crosshair.invokeOffset",function(t){var i=e.lines[0].isEventValid(t);return i.valid?i:n})),e.Combination||(e.push("coordinate.crosshair",e.get("crosshair")),e.pushIf("coordinate.scale",[{position:e.get("scaleAlign"),max_scale:e.get("maxValue")},{position:e.get("labelAlign"),start_scale:1,scale:1,end_scale:e.get("maxItemSize"),labels:e.get("labels"),label:e.get("label")}])),e.coo=t.Coordinate.coordinate_.call(e),e.Combination&&(e.coo.push("crosshair",e.get("crosshair")),e.coo.doCrosshair(e.coo)),!e.isE()){var o=e.coo.valid_width,s=o,a=e.get("maxItemSize")-1,r=o/a,l=e.get("point_space");if(e.get("proportional_spacing")&&(l&&r>l?s=a*l:e.push("point_space",r)),e.push("sub_option.width",s),e.push("sub_option.height",e.coo.valid_height),e.push("sub_option.originx",e.coo.get("x_start")+(o-s)/2),e.push("sub_option.originy",e.coo.get("y_end")),e.get("tip.enable")&&!e.mocker&&t.isFunction(e.get("tipMocker"))){e.push("sub_option.tip.enable",!1),e.push("tip.invokeOffsetDynamic",!0);var c,u,g,h,d=e.coo.get(e.X),p=e.coo.get(e.Y),f=e.coo.height,y=e.get("tipMockerOffset");y=t.isNumber(y)?0>y?0:y>1?1:y:null,e.push("tip.invokeOffset",function(t,e,i){return null!=y?i.top=p+(f-e)*y:(i.top=i.maxTop-(i.maxTop-i.minTop)/3-e,(e>f||p>i.top)&&(i.top=p)),{left:i.left-t-d>5?i.left-t-5:i.left+5,top:i.top}});var x=e.get("tip.listeners.parseText");x&&delete e.get("tip.listeners").parseText,e.mocker=new t.Custom({eventValid:function(i){return g=e.lines[0].isEventValid(i),g.hit=u!=g.i,g.valid&&(u=g.i,c=[],t.each(e.lines,function(t,e){h=t.isEventValid(i),0==e?g.minTop=g.maxTop=h.top:(g.minTop=Math.min(g.minTop,h.top),g.maxTop=Math.max(g.maxTop,h.top)),c.push(x?x(t,h.name,h.value,h.text,h.i):h.name+" "+h.value)}),g.text=e.get("tipMocker").call(e,c,g.i)),!!g.valid&&g}}),new t.Tip(e.get("tip"),e.mocker),e.register(e.mocker)}e.pushIf("sub_option.area_opacity",e.get("area_opacity"))}}}),t.LineBasic2D=t.extend(t.Line,{configure:function(){t.LineBasic2D.superclass.configure.call(this),this.type="basicline2d",this.tipInvokeHeap=[]},doAnimation:function(e,i,n){t.each(n.lines,function(o){t.each(o.get("points"),function(t){t.y=o.y-Math.ceil(n.animationArithmetic(e,0,o.y-t.y_,i))}),o.drawSegment()})},doConfig:function(){t.LineBasic2D.superclass.doConfig.call(this);var e=this._();if(!e.isE()){var i,n,o,s,a,r,l=e.coo.valid_height,c=e.get("point_space"),u=e.get("sub_option.originx"),g=e.get("nullToDirect");
e.push("sub_option.tip.showType","follow"),e.push("sub_option.coordinate",e.coo),e.push("sub_option.tipInvokeHeap",e.tipInvokeHeap),e.push("sub_option.point_space",c),t.each(e.data,function(h){i=e.coo.getScale(h.scaleAlign||e.get("scaleAlign")),a=e.get("sub_option.originy")-i.basic*l,n=[],t.each(h.value,function(d,p){null!=d?(o=c*p,s=(d-i.start)*l/i.distance,r={x:u+o,y:a-s,value:d,text:h.name+" "+d},t.merge(r,e.fireEvent(e,"parsePoint",[h,d,o,s,p,i])),n.push(r)):n.push({ignored:!g,direct:g})},e),t.merge(e.get("sub_option"),h),e.push("sub_option.points",n),e.push("sub_option.brushsize",h.linewidth||h.line_width),e.lines.push(new t.LineSegment(e.get("sub_option"),e))},this)}}}),t.register("LineBasic2D"),t.Area2D=t.extend(t.LineBasic2D,{configure:function(){t.Area2D.superclass.configure.call(this),this.type="area2d",this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0),t.Area2D.superclass.doConfig.call(this)}}),t.register("Area2D")}(iChart);
//# sourceMappingURL=ichart.1.2.1.beta.min.js.map
